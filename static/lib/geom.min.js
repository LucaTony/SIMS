/*
 * geom.min.js  version 1.2
 *
 * Copyright (c) 2015 Emmanuel PUYBARET / eTeks <info@eteks.com>
 * 
 * Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the "Classpath" exception as provided
 * by Oracle in the LICENSE file that accompanied OpenJDK 8 source code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 */
function NoninvertibleTransformException(a){this.message=a}function IllegalPathStateException(a){this.message=a}function PathIterator(){}PathIterator.WIND_EVEN_ODD=0;PathIterator.WIND_NON_ZERO=1;PathIterator.SEG_MOVETO=0;PathIterator.SEG_LINETO=1;PathIterator.SEG_QUADTO=2;PathIterator.SEG_CUBICTO=3;PathIterator.SEG_CLOSE=4;function Point2D(a,b){this.x=a!==undefined?a:0;this.y=b!==undefined?b:0}Point2D.prototype.getX=function(){return this.x};Point2D.prototype.getY=function(){return this.y};Point2D.prototype.setLocation=function(a,c){if(c===undefined){var b=a;this.setLocation(b.getX(),b.getY())}else{this.x=a;this.y=c}};Point2D.distanceSq=function(b,d,a,c){b-=a;d-=c;return(b*b+d*d)};Point2D.distance=function(b,d,a,c){b-=a;d-=c;return Math.sqrt(b*b+d*d)};Point2D.prototype.distanceSq=function(b,a){if(a===undefined){var c=b;this.distanceSq(c.getX(),c.getY())}else{b-=this.getX();a-=this.getY();return(b*b+a*a)}};Point2D.prototype.distance=function(b,a){if(a===undefined){var c=b;this.distance(c.getX(),c.getY())}else{x-=this.getX();a-=this.getY();return Math.sqrt(b*b+a*a)}};Point2D.prototype.clone=function(){return new Point2D(this.x,this.y)};Point2D.prototype.equals=function(a){if(a instanceof Point2D){return(this.getX()===a.getX())&&(this.getY()===a.getY())}return false};function Line2D(b,d,a,c){if(b===undefined){this.setLine(0,0,0,0)}else{if(a===undefined){var f=b;var e=a;this.setLine(f,e)}else{this.setLine(b,d,a,c)}}}Line2D.prototype.getX1=function(){return this.x1};Line2D.prototype.getY1=function(){return this.y1};Line2D.prototype.getP1=function(){return new Point2D.Float(x1,y1)};Line2D.prototype.getX2=function(){return this.x2};Line2D.prototype.getY2=function(){return this.y2};Line2D.prototype.getP2=function(){return new Point2D.Float(x2,y2)};Line2D.prototype.setLine=function(c,e,b,d){if(e===undefined){var a=c;this.setLine(a.getX1(),a.getY1(),a.getX2(),a.getY2())}else{if(b===undefined){var g=c;var f=e;this.setLine(g.getX(),g.getY(),f.getX(),f.getY())}}this.x1=c;this.y1=e;this.x2=b;this.y2=d};Line2D.prototype.getBounds2D=function(){var a,d,b,c;if(this.x1<this.x2){a=this.x1;b=this.x2-this.x1}else{a=this.x2;b=this.x1-this.x2}if(this.y1<this.y2){d=this.y1;c=this.y2-this.y1}else{d=this.y2;c=this.y1-this.y2}return new Rectangle2D(a,d,b,c)};Line2D.relativeCCW=function(d,g,b,f,e,c){b-=d;f-=g;e-=d;c-=g;var a=e*f-c*b;if(a===0){a=e*b+c*f;if(a>0){e-=b;c-=f;a=e*b+c*f;if(a<0){a=0}}}return(a<0)?-1:((a>0)?1:0)};Line2D.prototype.relativeCCW=function(b,a){if(a===undefined){var c=b;return Line2D.relativeCCW(this.getX1(),this.getY1(),this.getX2(),this.getY2(),c.getX(),c.getY())}else{return Line2D.relativeCCW(this.getX1(),this.getY1(),this.getX2(),this.getY2(),b,a)}};Line2D.linesIntersect=function(f,i,d,g,b,e,a,c){return((Line2D.relativeCCW(f,i,d,g,b,e)*Line2D.relativeCCW(f,i,d,g,a,c)<=0)&&(Line2D.relativeCCW(b,e,a,c,f,i)*Line2D.relativeCCW(b,e,a,c,d,g)<=0))};Line2D.prototype.intersectsLine=function(c,e,b,d){if(e===undefined){var a=c;return Line2D.linesIntersect(a.getX1(),a.getY1(),a.getX2(),a.getY2(),this.getX1(),this.getY1(),this.getX2(),this.getY2())}else{return Line2D.linesIntersect(c,e,b,d,this.getX1(),this.getY1(),this.getX2(),this.getY2())}};Line2D.ptSegDistSq=function(c,g,b,e,j,i){b-=c;e-=g;j-=c;i-=g;var f=j*b+i*e;var a;if(f<=0){a=0}else{j=b-j;i=e-i;f=j*b+i*e;if(f<=0){a=0}else{a=f*f/(b*b+e*e)}}var d=j*j+i*i-a;if(d<0){d=0}return d};Line2D.ptSegDist=function(c,f,a,e,d,b){return Math.sqrt(Line2D.ptSegDistSq(c,f,a,e,d,b))};Line2D.prototype.ptSegDistSq=function(b,a){if(a===undefined){var c=b;return Line2D.ptSegDistSq(this.getX1(),this.getY1(),this.getX2(),this.getY2(),c.getX(),c.getY())}else{return Line2D.ptSegDistSq(this.getX1(),this.getY1(),this.getX2(),this.getY2(),b,a)}};Line2D.prototype.ptSegDist=function(b,a){if(a===undefined){var c=b;return Line2D.ptSegDist(this.getX1(),this.getY1(),this.getX2(),this.getY2(),c.getX(),c.getY())}else{return Line2D.ptSegDist(this.getX1(),this.getY1(),this.getX2(),this.getY2(),b,a)}};Line2D.ptLineDistSq=function(c,g,b,e,j,i){b-=c;e-=g;j-=c;i-=g;var f=j*b+i*e;var a=f*f/(b*b+e*e);var d=j*j+i*i-a;if(d<0){d=0}return d};Line2D.ptLineDist=function(c,f,a,e,d,b){return Math.sqrt(Line2D.ptLineDistSq(c,f,a,e,d,b))};Line2D.prototype.ptLineDistSq=function(b,a){if(a===undefined){var c=b;return Line2D.ptLineDistSq(this.getX1(),this.getY1(),this.getX2(),this.getY2(),c.getX(),c.getY())}else{return Line2D.ptLineDistSq(this.getX1(),this.getY1(),this.getX2(),this.getY2(),b,a)}};Line2D.prototype.ptLineDist=function(b,a){if(a===undefined){var c=b;return Line2D.ptLineDist(this.getX1(),this.getY1(),this.getX2(),this.getY2(),c.getX(),c.getY())}else{return Line2D.ptLineDist(this.getX1(),this.getY1(),this.getX2(),this.getY2(),b,a)}};Line2D.prototype.intersects=function(a,e,b,c){if(e===undefined){var d=a;return d.intersectsLine(this.getX1(),this.getY1(),this.getX2(),this.getY2())}else{return this.intersects(new Rectangle2D(a,e,b,c))}};Line2D.prototype.contains=function(a,d,b,c){return false};Line2D.prototype.getPathIterator=function(a,b){return new LineIterator(this,a)};Line2D.prototype.clone=function(){return new Line2D(this.getX1(),this.getY1(),this.getX2(),this.getY2())};function LineIterator(b,a){this.line=b;this.affine=a;this.index=0}LineIterator.prototype=Object.create(PathIterator.prototype);LineIterator.prototype.constructor=LineIterator;LineIterator.prototype.getWindingRule=function(){return PathIterator.WIND_NON_ZERO};LineIterator.prototype.isDone=function(){return(this.index>1)};LineIterator.prototype.next=function(){this.index++};LineIterator.prototype.currentSegment=function(b){if(this.isDone()){throw new NoSuchElementException("line iterator out of bounds")}var a;if(this.index===0){b[0]=this.line.getX1();b[1]=this.line.getY1();a=PathIterator.SEG_MOVETO}else{b[0]=this.line.getX2();b[1]=this.line.getY2();a=PathIterator.SEG_LINETO}if(this.affine!==null){this.affine.transform(b,0,b,0,1)}return a};function Rectangle2D(a,d,b,c){this.setRect(a!==undefined?a:0,d!==undefined?d:0,b!==undefined?b:0,c!==undefined?c:0)}Rectangle2D.OUT_LEFT=1;Rectangle2D.OUT_TOP=2;Rectangle2D.OUT_RIGHT=4;Rectangle2D.OUT_BOTTOM=8;Rectangle2D.prototype.getX=function(){return this.x};Rectangle2D.prototype.getY=function(){return this.y};Rectangle2D.prototype.getWidth=function(){return this.width};Rectangle2D.prototype.getHeight=function(){return this.height};Rectangle2D.prototype.getMinX=function(){return this.getX()};Rectangle2D.prototype.getMinY=function(){return this.getY()};Rectangle2D.prototype.getMaxX=function(){return this.getX()+this.getWidth()};Rectangle2D.prototype.getMaxY=function(){return this.getY()+this.getHeight()};Rectangle2D.prototype.getCenterX=function(){return this.getX()+this.getWidth()/2};Rectangle2D.prototype.getCenterY=function(){return this.getY()+this.getHeight()/2};Rectangle2D.prototype.isEmpty=function(){return(this.width<=0)||(this.height<=0)};Rectangle2D.prototype.setRect=function(a,d,b,c){this.x=a;this.y=d;this.width=b;this.height=c};Rectangle2D.prototype.outcode=function(a,c){var b=0;if(this.width<=0){b|=Rectangle2D.OUT_LEFT|Rectangle2D.OUT_RIGHT}else{if(a<this.x){b|=Rectangle2D.OUT_LEFT}else{if(a>this.x+this.width){b|=Rectangle2D.OUT_RIGHT}}}if(this.height<=0){b|=Rectangle2D.OUT_TOP|Rectangle2D.OUT_BOTTOM}else{if(c<this.y){b|=Rectangle2D.OUT_TOP}else{if(c>this.y+this.height){b|=Rectangle2D.OUT_BOTTOM}}}return b};Rectangle2D.prototype.getBounds2D=function(){return new Rectangle2D(this.x,this.y,this.width,this.height)};Rectangle2D.prototype.createIntersection=function(b){var a=new Rectangle2D();Rectangle2D.intersect(this,b,a);return a};Rectangle2D.prototype.createUnion=function(b){var a=Rectangle2D();Rectangle2D.union(this,b,a);return a};Rectangle2D.prototype.intersectsLine=function(c,e,b,d){var g,f;if((f=this.outcode(b,d))===0){return true}while((g=this.outcode(c,e))!==0){if((g&f)!==0){return false}if((g&(Rectangle2D.OUT_LEFT|Rectangle2D.OUT_RIGHT))!==0){var a=this.getX();if((g&Rectangle2D.OUT_RIGHT)!==0){a+=this.getWidth()}e=e+(a-c)*(d-e)/(b-c);c=a}else{var i=this.getY();if((g&Rectangle2D.OUT_BOTTOM)!==0){i+=this.getHeight()}c=c+(i-e)*(b-c)/(d-e);e=i}}return true};Rectangle2D.prototype.setFrame=function(a,d,b,c){this.setRect(a,d,b,c)};Rectangle2D.prototype.intersects=function(a,f,b,d){if(this.isEmpty()||b<=0||d<=0){return false}var c=this.getX();var e=this.getY();return(a+b>c&&f+d>e&&a<c+this.getWidth()&&f<e+this.getHeight())};Rectangle2D.prototype.contains=function(a,f,b,d){if(b===undefined){var c=this.getX();var e=this.getY();return(a>=c&&f>=e&&a<c+this.getWidth()&&f<e+this.getHeight())}else{if(this.isEmpty()||b<=0||d<=0){return false}var c=this.getX();var e=this.getY();return(a>=c&&f>=e&&(a+b)<=c+this.getWidth()&&(f+d)<=e+this.getHeight())}};Rectangle2D.intersect=function(g,f,c){var b=Math.max(g.getMinX(),f.getMinX());var e=Math.max(g.getMinY(),f.getMinY());var a=Math.min(g.getMaxX(),f.getMaxX());var d=Math.min(g.getMaxY(),f.getMaxY());c.setFrame(b,e,a-b,d-e)};Rectangle2D.union=function(g,f,c){var b=Math.min(g.getMinX(),f.getMinX());var e=Math.min(g.getMinY(),f.getMinY());var a=Math.max(g.getMaxX(),f.getMaxX());var d=Math.max(g.getMaxY(),f.getMaxY());c.setFrameFromDiagonal(b,e,a,d)};Rectangle2D.prototype.add=function(i,g){var b,a,d,c;if(g===undefined){if(i instanceof Rectangle2D){var e=i;b=Math.min(this.getMinX(),e.getMinX());a=Math.max(this.getMaxX(),e.getMaxX());d=Math.min(this.getMinY(),e.getMinY());c=Math.max(this.getMaxY(),e.getMaxY())}else{var f=newX;this.add(f.getX(),f.getY());return}}else{b=Math.min(this.getMinX(),i);a=Math.max(this.getMaxX(),i);d=Math.min(this.getMinY(),g);c=Math.max(this.getMaxY(),g)}this.setRect(b,d,a-b,c-d)};Rectangle2D.prototype.getPathIterator=function(a,b){return new RectIterator(this,a)};Rectangle2D.prototype.equals=function(a){if(a===this){return true}if(a instanceof Rectangle2D){return((this.getX()===a.getX())&&(this.getY()===a.getY())&&(this.getWidth()===a.getWidth())&&(this.getHeight()===a.getHeight()))}return false};function RectIterator(b,a){this.x=b.getX();this.y=b.getY();this.w=b.getWidth();this.h=b.getHeight();this.affine=a;if(this.w<0||this.h<0){this.index=6}else{this.index=0}}RectIterator.prototype=Object.create(PathIterator.prototype);RectIterator.prototype.constructor=RectIterator;RectIterator.prototype.getWindingRule=function(){return PathIterator.WIND_NON_ZERO};RectIterator.prototype.isDone=function(){return this.index>5};RectIterator.prototype.next=function(){this.index++};RectIterator.prototype.currentSegment=function(a){if(this.isDone()){throw new NoSuchElementException("rect iterator out of bounds")}if(this.index===5){return PathIterator.SEG_CLOSE}a[0]=this.x;a[1]=this.y;if(this.index===1||this.index===2){a[0]+=this.w}if(this.index===2||this.index===3){a[1]+=this.h}if(this.affine!==null){this.affine.transform(a,0,a,0,1)}return(this.index===0?PathIterator.SEG_MOVETO:PathIterator.SEG_LINETO)};function Ellipse2D(a,d,b,c){this.setFrame(a!==undefined?a:0,d!==undefined?d:0,b!==undefined?b:0,c!==undefined?c:0)}Ellipse2D.prototype.getX=function(){return this.x};Ellipse2D.prototype.getY=function(){return this.y};Ellipse2D.prototype.getWidth=function(){return this.width};Ellipse2D.prototype.getHeight=function(){return this.height};Ellipse2D.prototype.isEmpty=function(){return(this.width<=0||this.height<=0)};Ellipse2D.prototype.setFrame=function(a,d,b,c){this.x=a;this.y=d;this.width=b;this.height=c};Ellipse2D.prototype.getBounds2D=function(){return new Rectangle2D(this.x,this.y,this.width,this.height)};Ellipse2D.prototype.intersects=function(j,i,l,g){if(l<=0||g<=0){return false}var f=this.getWidth();if(f<=0){return false}var c=(j-this.getX())/f-0.5;var b=c+l/f;var a=this.getHeight();if(a<=0){return false}var m=(i-this.getY())/a-0.5;var k=m+g/a;var e,d;if(c>0){e=c}else{if(b<0){e=b}else{e=0}}if(m>0){d=m}else{if(k<0){d=k}else{d=0}}return(e*e+d*d)<0.25};Ellipse2D.prototype.contains=function(b,i,d,f){if(d===undefined){var g=this.getWidth();if(g<=0){return false}var c=(b-this.getX())/g-0.5;var e=this.getHeight();if(e<=0){return false}var a=(i-this.getY())/e-0.5;return(c*c+a*a)<0.25}else{return(this.contains(b,i)&&this.contains(b+d,i)&&this.contains(b,i+f)&&this.contains(b+d,i+f))}};Ellipse2D.prototype.getPathIterator=function(a){return new EllipseIterator(this,a)};Ellipse2D.prototype.equals=function(b){if(b===this){return true}if(b instanceof Ellipse2D){var a=b;return((this.getX()===a.getX())&&(this.getY()===a.getY())&&(this.getWidth()===a.getWidth())&&(this.getHeight()===a.getHeight()))}return false};function EllipseIterator(b,a){this.x=b.getX();this.y=b.getY();this.w=b.getWidth();this.h=b.getHeight();this.affine=a;if(w<0||h<0){this.index=6}else{this.index=0}}EllipseIterator.prototype=Object.create(PathIterator.prototype);EllipseIterator.prototype.constructor=EllipseIterator;EllipseIterator.CtrlVal=0.5522847498307933;EllipseIterator.pcv=0.5+EllipseIterator.CtrlVal*0.5;EllipseIterator.ncv=0.5-EllipseIterator.CtrlVal*0.5;EllipseIterator.ctrlpts=[[1,EllipseIterator.pcv,EllipseIterator.pcv,1,0.5,1],[EllipseIterator.ncv,1,0,EllipseIterator.pcv,0,0.5],[0,EllipseIterator.ncv,EllipseIterator.ncv,0,0.5,0],[EllipseIterator.pcv,0,1,EllipseIterator.ncv,1,0.5]];EllipseIterator.prototype.getWindingRule=function(){return PathIterator.WIND_NON_ZERO};EllipseIterator.prototype.isDone=function(){return this.index>5};EllipseIterator.prototype.next=function(){this.index++};EllipseIterator.prototype.currentSegment=function(b){if(this.isDone()){throw new NoSuchElementException("ellipse iterator out of bounds")}if(this.index==5){return PathIterator.SEG_CLOSE}if(this.index==0){var a=EllipseIterator.ctrlpts[3];b[0]=this.x+a[4]*this.w;b[1]=this.y+a[5]*this.h;if(this.affine!=null){this.affine.transform(b,0,b,0,1)}return PathIterator.SEG_MOVETO}var a=EllipseIterator.ctrlpts[index-1];b[0]=this.x+a[0]*this.w;b[1]=this.y+a[1]*this.h;b[2]=this.x+a[2]*this.w;b[3]=this.y+a[3]*this.h;b[4]=this.x+a[4]*this.w;b[5]=this.y+a[5]*this.h;if(this.affine!=null){this.affine.transform(b,0,b,0,3)}return PathIterator.SEG_CUBICTO};function AffineTransform(f,i,c,g,a,e,d){if(f===undefined){this.m00=1;this.m10=0;this.m01=0;this.m11=1;this.m02=0;this.m12=0;this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}else{if(f instanceof AffineTransform){var b=f;this.m00=b.m00;this.m10=b.m10;this.m01=b.m01;this.m11=b.m11;this.m02=b.m02;this.m12=b.m12;this.state=b.state;this.type=b.type}else{if(d===undefined){this.m00=f;this.m10=i;this.m01=c;this.m11=g;this.m02=a;this.m12=e;this.updateState()}else{this.m00=f;this.m10=i;this.m01=c;this.m11=g;this.m02=a;this.m12=e;this.state=d;this.type=AffineTransform.TYPE_UNKNOWN}}}}AffineTransform.TYPE_UNKNOWN=-1;AffineTransform.TYPE_IDENTITY=0;AffineTransform.TYPE_TRANSLATION=1;AffineTransform.TYPE_UNIFORM_SCALE=2;AffineTransform.TYPE_GENERAL_SCALE=4;AffineTransform.TYPE_MASK_SCALE=(AffineTransform.TYPE_UNIFORM_SCALE|AffineTransform.TYPE_GENERAL_SCALE);AffineTransform.TYPE_FLIP=64;AffineTransform.TYPE_QUADRANT_ROTATION=8;AffineTransform.TYPE_GENERAL_ROTATION=16;AffineTransform.TYPE_MASK_ROTATION=(AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_GENERAL_ROTATION);AffineTransform.TYPE_GENERAL_TRANSFORM=32;AffineTransform.APPLY_IDENTITY=0;AffineTransform.APPLY_TRANSLATE=1;AffineTransform.APPLY_SCALE=2;AffineTransform.APPLY_SHEAR=4;AffineTransform.HI_SHIFT=3;AffineTransform.HI_IDENTITY=AffineTransform.APPLY_IDENTITY<<AffineTransform.HI_SHIFT;AffineTransform.HI_TRANSLATE=AffineTransform.APPLY_TRANSLATE<<AffineTransform.HI_SHIFT;AffineTransform.HI_SCALE=AffineTransform.APPLY_SCALE<<AffineTransform.HI_SHIFT;AffineTransform.HI_SHEAR=AffineTransform.APPLY_SHEAR<<AffineTransform.HI_SHIFT;AffineTransform.rot90conversion=[AffineTransform.APPLY_SHEAR,AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE,AffineTransform.APPLY_SHEAR,AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE,AffineTransform.APPLY_SCALE,AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE,AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE,AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE];AffineTransform.getTranslateInstance=function(b,a){var c=new AffineTransform();c.setToTranslation(b,a);return c};AffineTransform.getRotateInstance=function(d,b,c,a){var f=new AffineTransform();if(b===undefined){var e=d;f.setToRotation(e)}else{if(c===undefined){f.setToRotation(d,b)}else{if(a===undefined){var e=d;a=c;c=b;f.setToRotation(e,c,a)}else{f.setToRotation(d,b,c,a)}}}return f};AffineTransform.getQuadrantRotateInstance=function(b,c,a){var d=new AffineTransform();if(c===undefined){d.setToQuadrantRotation(b)}else{d.setToQuadrantRotation(b,c,a)}return d};AffineTransform.getScaleInstance=function(c,b){var a=new AffineTransform();a.setToScale(c,b);return a};AffineTransform.getShearInstance=function(b,a){var c=new AffineTransform();c.setToShear(b,a);return c};AffineTransform.prototype.getType=function(){if(this.type===AffineTransform.TYPE_UNKNOWN){this.calculateType()}return this.type};AffineTransform.prototype.calculateType=function(){var b=AffineTransform.TYPE_IDENTITY;var g,f;var e,d,c,a;this.updateState();switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):b=AffineTransform.TYPE_TRANSLATION;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):if((e=this.m00)*(c=this.m01)+(a=this.m10)*(d=this.m11)!==0){this.type=AffineTransform.TYPE_GENERAL_TRANSFORM;return}g=(e>=0);f=(d>=0);if(g===f){if(e!==d||c!==-a){b|=(AffineTransform.TYPE_GENERAL_ROTATION|AffineTransform.TYPE_GENERAL_SCALE)}else{if(e*d-c*a!==1){b|=(AffineTransform.TYPE_GENERAL_ROTATION|AffineTransform.TYPE_UNIFORM_SCALE)}else{b|=AffineTransform.TYPE_GENERAL_ROTATION}}}else{if(e!==-d||c!==a){b|=(AffineTransform.TYPE_GENERAL_ROTATION|AffineTransform.TYPE_FLIP|AffineTransform.TYPE_GENERAL_SCALE)}else{if(e*d-c*a!==1){b|=(AffineTransform.TYPE_GENERAL_ROTATION|AffineTransform.TYPE_FLIP|AffineTransform.TYPE_UNIFORM_SCALE)}else{b|=(AffineTransform.TYPE_GENERAL_ROTATION|AffineTransform.TYPE_FLIP)}}}break;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):b=AffineTransform.TYPE_TRANSLATION;case (AffineTransform.APPLY_SHEAR):g=((e=this.m01)>=0);f=((d=this.m10)>=0);if(g!==f){if(e!==-d){b|=(AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_GENERAL_SCALE)}else{if(e!==1&&e!==-1){b|=(AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_UNIFORM_SCALE)}else{b|=AffineTransform.TYPE_QUADRANT_ROTATION}}}else{if(e===d){b|=(AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_FLIP|AffineTransform.TYPE_UNIFORM_SCALE)}else{b|=(AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_FLIP|AffineTransform.TYPE_GENERAL_SCALE)}}break;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):b=AffineTransform.TYPE_TRANSLATION;case (AffineTransform.APPLY_SCALE):g=((e=this.m00)>=0);f=((d=this.m11)>=0);if(g===f){if(g){if(e===d){b|=AffineTransform.TYPE_UNIFORM_SCALE}else{b|=AffineTransform.TYPE_GENERAL_SCALE}}else{if(e!==d){b|=(AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_GENERAL_SCALE)}else{if(e!==-1){b|=(AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_UNIFORM_SCALE)}else{b|=AffineTransform.TYPE_QUADRANT_ROTATION}}}}else{if(e===-d){if(e===1||e===-1){b|=AffineTransform.TYPE_FLIP}else{b|=(AffineTransform.TYPE_FLIP|AffineTransform.TYPE_UNIFORM_SCALE)}}else{b|=(AffineTransform.TYPE_FLIP|AffineTransform.TYPE_GENERAL_SCALE)}}break;case (AffineTransform.APPLY_TRANSLATE):b=AffineTransform.TYPE_TRANSLATION;break;case (AffineTransform.APPLY_IDENTITY):break}this.type=b};AffineTransform.prototype.getDeterminant=function(){switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):return this.m00*this.m11-this.m01*this.m10;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR):return -(this.m01*this.m10);case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SCALE):return this.m00*this.m11;case (AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_IDENTITY):return 1}};AffineTransform.prototype.updateState=function(){if(this.m01===0&&this.m10===0){if(this.m00===1&&this.m11===1){if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}else{this.state=AffineTransform.APPLY_TRANSLATE;this.type=AffineTransform.TYPE_TRANSLATION}}else{if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_UNKNOWN}else{this.state=(AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE);this.type=AffineTransform.TYPE_UNKNOWN}}}else{if(this.m00===0&&this.m11===0){if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_UNKNOWN}else{this.state=(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE);this.type=AffineTransform.TYPE_UNKNOWN}}else{if(this.m02===0&&this.m12===0){this.state=(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE);this.type=AffineTransform.TYPE_UNKNOWN}else{this.state=(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE);this.type=AffineTransform.TYPE_UNKNOWN}}}};AffineTransform.prototype.stateError=function(){throw new InternalError("missing case in transform state switch")};AffineTransform.prototype.getMatrix=function(a){a[0]=this.m00;a[1]=this.m10;a[2]=this.m01;a[3]=this.m11;if(a.length>5){a[4]=this.m02;a[5]=this.m12}};AffineTransform.prototype.getScaleX=function(){return this.m00};AffineTransform.prototype.getScaleY=function(){return this.m11};AffineTransform.prototype.getShearX=function(){return this.m01};AffineTransform.prototype.getShearY=function(){return this.m10};AffineTransform.prototype.getTranslateX=function(){return this.m02};AffineTransform.prototype.getTranslateY=function(){return this.m12};AffineTransform.prototype.translate=function(b,a){switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):this.m02=b*this.m00+a*this.m01+this.m02;this.m12=b*this.m10+a*this.m11+this.m12;if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE;if(this.type!==AffineTransform.TYPE_UNKNOWN){this.type-=AffineTransform.TYPE_TRANSLATION}}return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):this.m02=b*this.m00+a*this.m01;this.m12=b*this.m10+a*this.m11;if(this.m02!==0||this.m12!==0){this.state=AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE;this.type|=AffineTransform.TYPE_TRANSLATION}return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):this.m02=a*this.m01+this.m02;this.m12=b*this.m10+this.m12;if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SHEAR;if(this.type!==AffineTransform.TYPE_UNKNOWN){this.type-=AffineTransform.TYPE_TRANSLATION}}return;case (AffineTransform.APPLY_SHEAR):this.m02=a*this.m01;this.m12=b*this.m10;if(this.m02!==0||this.m12!==0){this.state=AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE;this.type|=AffineTransform.TYPE_TRANSLATION}return;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):this.m02=b*this.m00+this.m02;this.m12=a*this.m11+this.m12;if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SCALE;if(this.type!==AffineTransform.TYPE_UNKNOWN){this.type-=AffineTransform.TYPE_TRANSLATION}}return;case (AffineTransform.APPLY_SCALE):this.m02=b*this.m00;this.m12=a*this.m11;if(this.m02!==0||this.m12!==0){this.state=AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE;this.type|=AffineTransform.TYPE_TRANSLATION}return;case (AffineTransform.APPLY_TRANSLATE):this.m02=b+this.m02;this.m12=a+this.m12;if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}return;case (AffineTransform.APPLY_IDENTITY):this.m02=b;this.m12=a;if(b!==0||a!==0){this.state=AffineTransform.APPLY_TRANSLATE;this.type=AffineTransform.TYPE_TRANSLATION}return}};AffineTransform.prototype.rotate90=function(){var a=this.m00;this.m00=this.m01;this.m01=-a;a=this.m10;this.m10=this.m11;this.m11=-a;var b=rot90conversion[this.state];if((b&(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE))===AffineTransform.APPLY_SCALE&&this.m00===1&&this.m11===1){b-=AffineTransform.APPLY_SCALE}this.state=b;this.type=AffineTransform.TYPE_UNKNOWN};AffineTransform.prototype.rotate180=function(){this.m00=-this.m00;this.m11=-this.m11;var a=this.state;if((a&(AffineTransform.APPLY_SHEAR))!==0){this.m01=-this.m01;this.m10=-this.m10}else{if(this.m00===1&&this.m11===1){this.state=a&~AffineTransform.APPLY_SCALE}else{this.state=a|AffineTransform.APPLY_SCALE}}this.type=AffineTransform.TYPE_UNKNOWN};AffineTransform.prototype.rotate270=function(){var a=this.m00;this.m00=-this.m01;this.m01=a;a=this.m10;this.m10=-this.m11;this.m11=a;var b=rot90conversion[this.state];if((b&(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE))===AffineTransform.APPLY_SCALE&&this.m00===1&&this.m11===1){b-=AffineTransform.APPLY_SCALE}this.state=b;this.type=AffineTransform.TYPE_UNKNOWN};AffineTransform.prototype.rotate=function(e,d,j,i){if(d===undefined){var c=e;var g=Math.sin(c);if(g===1){this.rotate90()}else{if(g===-1){this.rotate270()}else{var k=Math.cos(c);if(k===-1){this.rotate180()}else{if(k!==1){var b,a;b=this.m00;a=this.m01;this.m00=k*b+g*a;this.m01=-g*b+k*a;b=this.m10;a=this.m11;this.m10=k*b+g*a;this.m11=-g*b+k*a;this.updateState()}}}}}else{if(j===undefined){if(d===0){if(e<0){this.rotate180()}}else{if(e===0){if(d>0){this.rotate90()}else{this.rotate270()}}else{var f=Math.sqrt(e*e+d*d);var g=d/f;var k=e/f;var b,a;b=this.m00;a=this.m01;this.m00=k*b+g*a;this.m01=-g*b+k*a;b=this.m10;a=this.m11;this.m10=k*b+g*a;this.m11=-g*b+k*a;this.updateState()}}}else{if(i===undefined){var c=e;i=j;j=d;this.translate(j,i);this.rotate(c);this.translate(-j,-i)}else{this.translate(j,i);this.rotate(e,d);this.translate(-j,-i)}}}};AffineTransform.prototype.quadrantRotate=function(b,c,a){if(c===undefined){switch(b&3){case 0:break;case 1:this.rotate90();break;case 2:this.rotate180();break;case 3:this.rotate270();break}}else{switch(b&3){case 0:return;case 1:this.m02+=c*(this.m00-this.m01)+a*(this.m01+this.m00);this.m12+=c*(this.m10-this.m11)+a*(this.m11+this.m10);this.rotate90();break;case 2:this.m02+=c*(this.m00+this.m00)+a*(this.m01+this.m01);this.m12+=c*(this.m10+this.m10)+a*(this.m11+this.m11);this.rotate180();break;case 3:this.m02+=c*(this.m00+this.m01)+a*(this.m01-this.m00);this.m12+=c*(this.m10+this.m11)+a*(this.m11-this.m10);this.rotate270();break}if(this.m02===0&&this.m12===0){this.state&=~AffineTransform.APPLY_TRANSLATE}else{this.state|=AffineTransform.APPLY_TRANSLATE}}};AffineTransform.prototype.scale=function(c,b){var a=this.state;switch(a){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):this.m00*=c;this.m11*=b;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR):this.m01*=b;this.m10*=c;if(this.m01===0&&this.m10===0){a&=AffineTransform.APPLY_TRANSLATE;if(this.m00===1&&this.m11===1){this.type=(a===AffineTransform.APPLY_IDENTITY?AffineTransform.TYPE_IDENTITY:AffineTransform.TYPE_TRANSLATION)}else{a|=AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_UNKNOWN}this.state=a}return;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SCALE):this.m00*=c;this.m11*=b;if(this.m00===1&&this.m11===1){this.state=(a&=AffineTransform.APPLY_TRANSLATE);this.type=(a===AffineTransform.APPLY_IDENTITY?AffineTransform.TYPE_IDENTITY:AffineTransform.TYPE_TRANSLATION)}else{this.type=AffineTransform.TYPE_UNKNOWN}return;case (AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_IDENTITY):this.m00=c;this.m11=b;if(c!==1||b!==1){this.state=a|AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_UNKNOWN}return}};AffineTransform.prototype.shear=function(b,a){var e=this.state;switch(e){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):var d,c;d=this.m00;c=this.m01;this.m00=d+c*a;this.m01=d*b+c;d=this.m10;c=this.m11;this.m10=d+c*a;this.m11=d*b+c;this.updateState();return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR):this.m00=this.m01*a;this.m11=this.m10*b;if(this.m00!==0||this.m11!==0){this.state=e|AffineTransform.APPLY_SCALE}this.type=AffineTransform.TYPE_UNKNOWN;return;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SCALE):this.m01=this.m00*b;this.m10=this.m11*a;if(this.m01!==0||this.m10!==0){this.state=e|AffineTransform.APPLY_SHEAR}this.type=AffineTransform.TYPE_UNKNOWN;return;case (AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_IDENTITY):this.m01=b;this.m10=a;if(this.m01!==0||this.m10!==0){this.state=e|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_UNKNOWN}return}};AffineTransform.prototype.setToIdentity=function(){this.m00=this.m11=1;this.m10=this.m01=this.m02=this.m12=0;this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY};AffineTransform.prototype.setToTranslation=function(b,a){this.m00=1;this.m10=0;this.m01=0;this.m11=1;this.m02=b;this.m12=a;if(b!==0||a!==0){this.state=AffineTransform.APPLY_TRANSLATE;this.type=AffineTransform.TYPE_TRANSLATION}else{this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}};AffineTransform.prototype.setToRotation=function(d,b,i,g){if(b===undefined){var a=d;var f=Math.sin(a);var j;if(f===1||f===-1){j=0;this.state=AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_QUADRANT_ROTATION}else{j=Math.cos(a);if(j===-1){f=0;this.state=AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_QUADRANT_ROTATION}else{if(j===1){f=0;this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}else{this.state=AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_GENERAL_ROTATION}}}this.m00=j;this.m10=f;this.m01=-f;this.m11=j;this.m02=0;this.m12=0}else{if(i===undefined){var f,j;if(b===0){f=0;if(d<0){j=-1;this.state=AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_QUADRANT_ROTATION}else{j=1;this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}}else{if(d===0){j=0;f=(b>0)?1:-1;this.state=AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_QUADRANT_ROTATION}else{var e=Math.sqrt(d*d+b*b);j=d/e;f=b/e;this.state=AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_GENERAL_ROTATION}}this.m00=j;this.m10=f;this.m01=-f;this.m11=j;this.m02=0;this.m12=0}else{if(g===undefined){var a=d;g=i;i=b;this.setToRotation(a);var f=this.m10;var c=1-this.m00;this.m02=i*c+g*f;this.m12=g*c-i*f;if(this.m02!==0||this.m12!==0){this.state|=AffineTransform.APPLY_TRANSLATE;this.type|=AffineTransform.TYPE_TRANSLATION}}else{this.setToRotation(d,b);var f=this.m10;var c=1-this.m00;this.m02=i*c+g*f;this.m12=g*c-i*f;if(this.m02!==0||this.m12!==0){this.state|=AffineTransform.APPLY_TRANSLATE;this.type|=AffineTransform.TYPE_TRANSLATION}}}}};AffineTransform.prototype.setToQuadrantRotation=function(b,c,a){if(c===undefined){switch(b&3){case 0:this.m00=1;this.m10=0;this.m01=0;this.m11=1;this.m02=0;this.m12=0;this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY;break;case 1:this.m00=0;this.m10=1;this.m01=-1;this.m11=0;this.m02=0;this.m12=0;this.state=AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_QUADRANT_ROTATION;break;case 2:this.m00=-1;this.m10=0;this.m01=0;this.m11=-1;this.m02=0;this.m12=0;this.state=AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_QUADRANT_ROTATION;break;case 3:this.m00=0;this.m10=-1;this.m01=1;this.m11=0;this.m02=0;this.m12=0;this.state=AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_QUADRANT_ROTATION;break}}else{switch(b&3){case 0:this.m00=1;this.m10=0;this.m01=0;this.m11=1;this.m02=0;this.m12=0;state=AffineTransform.APPLY_IDENTITY;type=AffineTransform.TYPE_IDENTITY;break;case 1:this.m00=0;this.m10=1;this.m01=-1;this.m11=0;this.m02=c+a;this.m12=a-c;if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_QUADRANT_ROTATION}else{this.state=AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE;this.type=AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_TRANSLATION}break;case 2:this.m00=-1;this.m10=0;this.m01=0;this.m11=-1;this.m02=c+c;this.m12=a+a;if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_QUADRANT_ROTATION}else{this.state=AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE;this.type=AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_TRANSLATION}break;case 3:this.m00=0;this.m10=-1;this.m01=1;this.m11=0;this.m02=c-a;this.m12=a+c;if(this.m02===0&&this.m12===0){this.state=AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_QUADRANT_ROTATION}else{this.state=AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE;this.type=AffineTransform.TYPE_QUADRANT_ROTATION|AffineTransform.TYPE_TRANSLATION}break}}};AffineTransform.prototype.setToScale=function(b,a){this.m00=b;this.m10=0;this.m01=0;this.m11=a;this.m02=0;this.m12=0;if(b!==1||a!==1){this.state=AffineTransform.APPLY_SCALE;this.type=AffineTransform.TYPE_UNKNOWN}else{this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}};AffineTransform.prototype.setToShear=function(b,a){this.m00=1;this.m01=b;this.m10=a;this.m11=1;this.m02=0;this.m12=0;if(b!==0||a!==0){this.state=(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE);this.type=AffineTransform.TYPE_UNKNOWN}else{this.state=AffineTransform.APPLY_IDENTITY;this.type=AffineTransform.TYPE_IDENTITY}};AffineTransform.prototype.setTransform=function(e,g,c,f,a,d){if(e instanceof AffineTransform){var b=e;this.m00=b.m00;this.m10=b.m10;this.m01=b.m01;this.m11=b.m11;this.m02=b.m02;this.m12=b.m12;this.state=b.state;this.type=b.type}else{this.m00=e;this.m10=g;this.m01=c;this.m11=f;this.m02=a;this.m12=d;this.updateState()}};AffineTransform.prototype.concatenate=function(k){var e,c;var j,i,d,b;var g,a;var f=this.state;var l=k.state;switch((l<<AffineTransform.HI_SHIFT)|f){case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_IDENTITY):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):return;case (AffineTransform.HI_SHEAR|AffineTransform.HI_SCALE|AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_IDENTITY):this.m01=k.m01;this.m10=k.m10;case (AffineTransform.HI_SCALE|AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_IDENTITY):this.m00=k.m00;this.m11=k.m11;case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_IDENTITY):this.m02=k.m02;this.m12=k.m12;this.state=l;this.type=k.type;return;case (AffineTransform.HI_SHEAR|AffineTransform.HI_SCALE|AffineTransform.APPLY_IDENTITY):this.m01=k.m01;this.m10=k.m10;case (AffineTransform.HI_SCALE|AffineTransform.APPLY_IDENTITY):this.m00=k.m00;this.m11=k.m11;this.state=l;this.type=k.type;return;case (AffineTransform.HI_SHEAR|AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_IDENTITY):this.m02=k.m02;this.m12=k.m12;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_IDENTITY):this.m01=k.m01;this.m10=k.m10;this.m00=this.m11=0;this.state=l;this.type=k.type;return;case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_TRANSLATE):this.translate(k.m02,k.m12);return;case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_TRANSLATE):this.scale(k.m00,k.m11);return;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):i=k.m01;d=k.m10;e=this.m00;this.m00=this.m01*d;this.m01=e*i;e=this.m10;this.m10=this.m11*d;this.m11=e*i;this.type=AffineTransform.TYPE_UNKNOWN;return;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR):this.m00=this.m01*k.m10;this.m01=0;this.m11=this.m10*k.m01;this.m10=0;this.state=f^(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE);this.type=AffineTransform.TYPE_UNKNOWN;return;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SCALE):this.m01=this.m00*k.m01;this.m00=0;this.m10=this.m11*k.m10;this.m11=0;this.state=f^(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE);this.type=AffineTransform.TYPE_UNKNOWN;return;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_TRANSLATE):this.m00=0;this.m01=k.m01;this.m10=k.m10;this.m11=0;this.state=AffineTransform.APPLY_TRANSLATE|AffineTransform.APPLY_SHEAR;this.type=AffineTransform.TYPE_UNKNOWN;return}j=k.m00;i=k.m01;g=k.m02;d=k.m10;b=k.m11;a=k.m12;switch(f){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):this.state=f|l;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):e=this.m00;c=this.m01;this.m00=j*e+d*c;this.m01=i*e+b*c;this.m02+=g*e+a*c;e=this.m10;c=this.m11;this.m10=j*e+d*c;this.m11=i*e+b*c;this.m12+=g*e+a*c;this.type=AffineTransform.TYPE_UNKNOWN;return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR):e=this.m01;this.m00=d*e;this.m01=b*e;this.m02+=a*e;e=this.m10;this.m10=j*e;this.m11=i*e;this.m12+=g*e;break;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SCALE):e=this.m00;this.m00=j*e;this.m01=i*e;this.m02+=g*e;e=this.m11;this.m10=d*e;this.m11=b*e;this.m12+=a*e;break;case (AffineTransform.APPLY_TRANSLATE):this.m00=j;this.m01=i;this.m02+=g;this.m10=d;this.m11=b;this.m12+=a;this.state=l|AffineTransform.APPLY_TRANSLATE;this.type=AffineTransform.TYPE_UNKNOWN;return}this.updateState()};AffineTransform.prototype.preConcatenate=function(k){var e,c;var j,i,d,b;var g,a;var f=this.state;var l=k.state;switch((l<<AffineTransform.HI_SHIFT)|f){case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_IDENTITY):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_IDENTITY|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):return;case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_IDENTITY):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):this.m02=k.m02;this.m12=k.m12;this.state=f|AffineTransform.APPLY_TRANSLATE;this.type|=AffineTransform.TYPE_TRANSLATION;return;case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_TRANSLATE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):this.m02=this.m02+k.m02;this.m12=this.m12+k.m12;return;case (AffineTransform.HI_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_IDENTITY):this.state=f|AffineTransform.APPLY_SCALE;case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SHEAR):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SCALE|AffineTransform.APPLY_SCALE):j=k.m00;b=k.m11;if((f&AffineTransform.APPLY_SHEAR)!==0){this.m01=this.m01*j;this.m10=this.m10*b;if((f&AffineTransform.APPLY_SCALE)!==0){this.m00=this.m00*j;this.m11=this.m11*b}}else{this.m00=this.m00*j;this.m11=this.m11*b}if((f&AffineTransform.APPLY_TRANSLATE)!==0){this.m02=this.m02*j;this.m12=this.m12*b}this.type=AffineTransform.TYPE_UNKNOWN;return;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR):f=f|AffineTransform.APPLY_SCALE;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_IDENTITY):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SCALE):this.state=f^AffineTransform.APPLY_SHEAR;case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.HI_SHEAR|AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):i=k.m01;d=k.m10;e=this.m00;this.m00=this.m10*i;this.m10=e*d;e=this.m01;this.m01=this.m11*i;this.m11=e*d;e=this.m02;this.m02=this.m12*i;this.m12=e*d;this.type=AffineTransform.TYPE_UNKNOWN;return}j=k.m00;i=k.m01;g=k.m02;d=k.m10;b=k.m11;a=k.m12;switch(f){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):e=this.m02;c=this.m12;g+=e*j+c*i;a+=e*d+c*b;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):this.m02=g;this.m12=a;e=this.m00;c=this.m10;this.m00=e*j+c*i;this.m10=e*d+c*b;e=this.m01;c=this.m11;this.m01=e*j+c*i;this.m11=e*d+c*b;break;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):e=this.m02;c=this.m12;g+=e*j+c*i;a+=e*d+c*b;case (AffineTransform.APPLY_SHEAR):this.m02=g;this.m12=a;e=this.m10;this.m00=e*i;this.m10=e*b;e=this.m01;this.m01=e*j;this.m11=e*d;break;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):e=this.m02;c=this.m12;g+=e*j+c*i;a+=e*d+c*b;case (AffineTransform.APPLY_SCALE):this.m02=g;this.m12=a;e=this.m00;this.m00=e*j;this.m10=e*d;e=this.m11;this.m01=e*i;this.m11=e*b;break;case (AffineTransform.APPLY_TRANSLATE):e=this.m02;c=this.m12;g+=e*j+c*i;a+=e*d+c*b;case (AffineTransform.APPLY_IDENTITY):this.m02=g;this.m12=a;this.m00=j;this.m10=d;this.m01=i;this.m11=b;this.state=f|l;this.type=AffineTransform.TYPE_UNKNOWN;return}this.updateState()};AffineTransform.prototype.createInverse=function(){var a;switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):a=this.m00*this.m11-this.m01*this.m10;if(Math.abs(a)<=Double.MIN_VALUE){throw new NoninvertibleTransformException("Determinant is "+a)}return new AffineTransform(this.m11/a,-this.m10/a,-this.m01/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a,(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE));case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):a=this.m00*this.m11-this.m01*this.m10;if(Math.abs(a)<=Double.MIN_VALUE){throw new NoninvertibleTransformException("Determinant is "+a)}return new AffineTransform(this.m11/a,-this.m10/a,-this.m01/a,this.m00/a,0,0,(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE));case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):if(this.m01===0||this.m10===0){throw new NoninvertibleTransformException("Determinant is 0")}return new AffineTransform(0,1/this.m01,1/this.m10,0,-this.m12/this.m10,-this.m02/this.m01,(AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE));case (AffineTransform.APPLY_SHEAR):if(this.m01===0||this.m10===0){throw new NoninvertibleTransformException("Determinant is 0")}return new AffineTransform(0,1/this.m01,1/this.m10,0,0,0,(AffineTransform.APPLY_SHEAR));case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):if(this.m00===0||this.m11===0){throw new NoninvertibleTransformException("Determinant is 0")}return new AffineTransform(1/this.m00,0,0,1/this.m11,-this.m02/this.m00,-this.m12/this.m11,(AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE));case (AffineTransform.APPLY_SCALE):if(this.m00===0||this.m11===0){throw new NoninvertibleTransformException("Determinant is 0")}return new AffineTransform(1/this.m00,0,0,1/this.m11,0,0,(AffineTransform.APPLY_SCALE));case (AffineTransform.APPLY_TRANSLATE):return new AffineTransform(1,0,0,1,-this.m02,-this.m12,(AffineTransform.APPLY_TRANSLATE));case (AffineTransform.APPLY_IDENTITY):return new AffineTransform()}};AffineTransform.prototype.invert=function(){var d,b,a;var g,f,c;var e;switch(state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):d=this.m00;b=this.m01;a=this.m02;g=this.m10;f=this.m11;c=this.m12;e=d*f-b*g;if(Math.abs(e)<=Double.MIN_VALUE){throw new NoninvertibleTransformException("Determinant is "+e)}this.m00=f/e;this.m10=-g/e;this.m01=-b/e;this.m11=d/e;this.m02=(b*c-f*a)/e;this.m12=(g*a-d*c)/e;break;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):d=this.m00;b=this.m01;g=this.m10;f=this.m11;e=d*f-b*g;if(Math.abs(e)<=Double.MIN_VALUE){throw new NoninvertibleTransformException("Determinant is "+e)}this.m00=f/e;this.m10=-g/e;this.m01=-b/e;this.m11=d/e;break;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):b=this.m01;a=this.m02;g=this.m10;c=this.m12;if(b===0||g===0){throw new NoninvertibleTransformException("Determinant is 0")}this.m10=1/b;this.m01=1/g;this.m02=-c/g;this.m12=-a/b;break;case (AffineTransform.APPLY_SHEAR):b=this.m01;g=this.m10;if(b===0||g===0){throw new NoninvertibleTransformException("Determinant is 0")}this.m10=1/b;this.m01=1/g;break;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):d=this.m00;a=this.m02;f=this.m11;c=this.m12;if(d===0||f===0){throw new NoninvertibleTransformException("Determinant is 0")}this.m00=1/d;this.m11=1/f;this.m02=-a/d;this.m12=-c/f;break;case (AffineTransform.APPLY_SCALE):d=this.m00;f=this.m11;if(d===0||f===0){throw new NoninvertibleTransformException("Determinant is 0")}this.m00=1/d;this.m11=1/f;break;case (AffineTransform.APPLY_TRANSLATE):this.m02=-this.m02;this.m12=-this.m12;break;case (AffineTransform.APPLY_IDENTITY):break}};AffineTransform.prototype.transform=function(k,j,n,m,b){if(k instanceof Point2D){var s=k;var l=j;if(l===null){l=new Point2D()}var i=s.getX();var g=s.getY();switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):l.setLocation(i*this.m00+g*this.m01+this.m02,i*this.m10+g*this.m11+this.m12);return l;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):l.setLocation(i*this.m00+g*this.m01,i*this.m10+g*this.m11);return l;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):l.setLocation(g*this.m01+this.m02,i*this.m10+this.m12);return l;case (AffineTransform.APPLY_SHEAR):l.setLocation(g*this.m01,i*this.m10);return l;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):l.setLocation(i*this.m00+this.m02,g*this.m11+this.m12);return l;case (AffineTransform.APPLY_SCALE):l.setLocation(i*this.m00,g*this.m11);return l;case (AffineTransform.APPLY_TRANSLATE):l.setLocation(i+this.m02,g+this.m12);return l;case (AffineTransform.APPLY_IDENTITY):l.setLocation(i,g);return l}}else{if(k[0] instanceof Point2D){var s=k;var l=n;var d=this.state;while(--b>=0){var f=s[j++];var i=f.getX();var g=f.getY();var r=l[m++];if(r===null){r=new Point2D();l[m-1]=r}switch(d){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):r.setLocation(i*this.m00+g*this.m01+this.m02,i*this.m10+g*this.m11+this.m12);break;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):r.setLocation(i*this.m00+g*this.m01,i*this.m10+g*this.m11);break;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):r.setLocation(g*this.m01+this.m02,i*this.m10+this.m12);break;case (AffineTransform.APPLY_SHEAR):r.setLocation(g*this.m01,i*this.m10);break;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):r.setLocation(i*this.m00+this.m02,g*this.m11+this.m12);break;case (AffineTransform.APPLY_SCALE):r.setLocation(i*this.m00,g*this.m11);break;case (AffineTransform.APPLY_TRANSLATE):r.setLocation(i+this.m02,g+this.m12);break;case (AffineTransform.APPLY_IDENTITY):r.setLocation(i,g);break}}}else{var q,p,o,e,c,a;if(n===k&&m>j&&m<j+b*2){System.arraycopy(k,j,n,m,b*2);j=m}switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):q=this.m00;p=this.m01;o=this.m02;e=this.m10;c=this.m11;a=this.m12;while(--b>=0){var i=k[j++];var g=k[j++];n[m++]=q*i+p*g+o;n[m++]=e*i+c*g+a}return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):q=this.m00;p=this.m01;e=this.m10;c=this.m11;while(--b>=0){var i=k[j++];var g=k[j++];n[m++]=q*i+p*g;n[m++]=e*i+c*g}return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):p=this.m01;o=this.m02;e=this.m10;a=this.m12;while(--b>=0){var i=k[j++];n[m++]=p*k[j++]+o;n[m++]=e*i+a}return;case (AffineTransform.APPLY_SHEAR):p=this.m01;e=this.m10;while(--b>=0){var i=k[j++];n[m++]=p*k[j++];n[m++]=e*i}return;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):q=this.m00;o=this.m02;c=this.m11;a=this.m12;while(--b>=0){n[m++]=q*k[j++]+o;n[m++]=c*k[j++]+a}return;case (AffineTransform.APPLY_SCALE):q=this.m00;c=this.m11;while(--b>=0){n[m++]=q*k[j++];n[m++]=c*k[j++]}return;case (AffineTransform.APPLY_TRANSLATE):o=this.m02;a=this.m12;while(--b>=0){n[m++]=k[j++]+o;n[m++]=k[j++]+a}return;case (AffineTransform.APPLY_IDENTITY):if(k!==n||j!==m){System.arraycopy(k,j,n,m,b*2)}return}}}};AffineTransform.prototype.inverseTransform=function(g,m,c,j,b){if(c===undefined){var a=g;var l=m;if(l===null){l=new Point2D()}var n=a.getX();var k=a.getY();switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):n-=this.m02;k-=this.m12;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):var f=this.m00*this.m11-this.m01*this.m10;if(Math.abs(f)<=Double.MIN_VALUE){throw new NoninvertibleTransformException("Determinant is "+f)}l.setLocation((n*this.m11-k*this.m01)/f,(k*this.m00-n*this.m10)/f);return l;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):n-=this.m02;k-=this.m12;case (AffineTransform.APPLY_SHEAR):if(this.m01===0||this.m10===0){throw new NoninvertibleTransformException("Determinant is 0")}l.setLocation(k/this.m10,n/this.m01);return l;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):n-=this.m02;k-=this.m12;case (AffineTransform.APPLY_SCALE):if(this.m00===0||this.m11===0){throw new NoninvertibleTransformException("Determinant is 0")}l.setLocation(n/this.m00,k/this.m11);return l;case (AffineTransform.APPLY_TRANSLATE):l.setLocation(n-this.m02,k-this.m12);return l;case (AffineTransform.APPLY_IDENTITY):l.setLocation(n,k);return l}}else{var q,p,o,i,e,d;var f;if(c===g&&j>m&&j<m+b*2){System.arraycopy(g,m,c,j,b*2);m=j}switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):q=this.m00;p=this.m01;o=this.m02;i=this.m10;e=this.m11;d=this.m12;f=q*e-p*i;if(Math.abs(f)<=Double.MIN_VALUE){throw new NoninvertibleTransformException("Determinant is "+f)}while(--b>=0){var n=g[m++]-o;var k=g[m++]-d;c[j++]=(n*e-k*p)/f;c[j++]=(k*q-n*i)/f}return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):q=this.m00;p=this.m01;i=this.m10;e=this.m11;f=q*e-p*i;if(Math.abs(f)<=Double.MIN_VALUE){throw new NoninvertibleTransformException("Determinant is "+f)}while(--b>=0){var n=g[m++];var k=g[m++];c[j++]=(n*e-k*p)/f;c[j++]=(k*q-n*i)/f}return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):p=this.m01;o=this.m02;i=this.m10;d=this.m12;if(p===0||i===0){throw new NoninvertibleTransformException("Determinant is 0")}while(--b>=0){var n=g[m++]-o;c[j++]=(g[m++]-d)/i;c[j++]=n/p}return;case (AffineTransform.APPLY_SHEAR):p=this.m01;i=this.m10;if(p===0||i===0){throw new NoninvertibleTransformException("Determinant is 0")}while(--b>=0){var n=g[m++];c[j++]=g[m++]/i;c[j++]=n/p}return;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):q=this.m00;o=this.m02;e=this.m11;d=this.m12;if(q===0||e===0){throw new NoninvertibleTransformException("Determinant is 0")}while(--b>=0){c[j++]=(g[m++]-o)/q;c[j++]=(g[m++]-d)/e}return;case (AffineTransform.APPLY_SCALE):q=this.m00;e=this.m11;if(q===0||e===0){throw new NoninvertibleTransformException("Determinant is 0")}while(--b>=0){c[j++]=g[m++]/q;c[j++]=g[m++]/e}return;case (AffineTransform.APPLY_TRANSLATE):o=this.m02;d=this.m12;while(--b>=0){c[j++]=g[m++]-o;c[j++]=g[m++]-d}return;case (AffineTransform.APPLY_IDENTITY):if(g!==c||m!==j){System.arraycopy(g,m,c,j,b*2)}return}}};AffineTransform.prototype.deltaTransform=function(e,k,c,g,b){if(c===undefined){var a=e;var j=k;if(j===null){j=new Point2D()}var l=a.getX();var i=a.getY();switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):j.setLocation(l*this.m00+i*this.m01,l*this.m10+i*this.m11);return j;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR):j.setLocation(i*this.m01,l*this.m10);return j;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SCALE):j.setLocation(l*this.m00,i*this.m11);return j;case (AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_IDENTITY):j.setLocation(l,i);return j}}else{var n,m,f,d;if(c===e&&g>k&&g<k+b*2){System.arraycopy(e,k,c,g,b*2);k=g}switch(this.state){default:this.stateError();case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_SCALE):n=this.m00;m=this.m01;f=this.m10;d=this.m11;while(--b>=0){var l=e[k++];var i=e[k++];c[g++]=l*n+i*m;c[g++]=l*f+i*d}return;case (AffineTransform.APPLY_SHEAR|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SHEAR):m=this.m01;f=this.m10;while(--b>=0){var l=e[k++];c[g++]=e[k++]*m;c[g++]=l*f}return;case (AffineTransform.APPLY_SCALE|AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_SCALE):n=this.m00;d=this.m11;while(--b>=0){c[g++]=e[k++]*n;c[g++]=e[k++]*d}return;case (AffineTransform.APPLY_TRANSLATE):case (AffineTransform.APPLY_IDENTITY):if(e!==c||k!==g){System.arraycopy(e,k,c,g,b*2)}return}}};AffineTransform.prototype.createTransformedShape=function(a){if(a===null){return null}return new Path2D(a,this)};AffineTransform.prototype.isIdentity=function(){return(this.state===AffineTransform.APPLY_IDENTITY||(this.getType()===AffineTransform.TYPE_IDENTITY))};AffineTransform.prototype.clone=function(){return new AffineTransform(this)};AffineTransform.prototype.equals=function(a){if(!(a instanceof AffineTransform)){return false}return((this.m00===a.m00)&&(this.m01===a.m01)&&(this.m02===a.m02)&&(this.m10===a.m10)&&(this.m11===a.m11)&&(this.m12===a.m12))};function Path2D(d,a){this.numTypes=0;this.numCoords=0;if(d===undefined){this.setWindingRule(PathIterator.WIND_NON_ZERO);this.pointTypes=new Array(Point2D.INIT_SIZE);this.pointCoords=new Array(Point2D.INIT_SIZE*2);return}else{if(a===undefined){if(typeof d==="object"){a=null}else{var f=d;this.setWindingRule(f);this.pointTypes=new Array(Point2D.INIT_SIZE);this.pointCoords=new Array(Point2D.INIT_SIZE*2);return}}else{if(typeof d!=="object"){var f=d;var c=a;this.setWindingRule(f);this.pointTypes=new Array(c);this.pointCoords=new Array(c*2);return}}}if(d instanceof Path2D){var b=d;this.setWindingRule(b.windingRule);this.numTypes=b.numTypes;this.pointTypes=b.pointTypes.splice(0);this.numCoords=b.numCoords;this.pointCoords=b.cloneCoordsFloat(a)}else{var e=d.getPathIterator(a);this.setWindingRule(e.getWindingRule());this.pointTypes=new Array(Point2D.INIT_SIZE);this.pointCoords=new Array(Point2D.INIT_SIZE*2);this.append(e,false)}}Point2D.INIT_SIZE=20;Point2D.EXPAND_MAX=500;Path2D.prototype.cloneCoordsFloat=function(a){var b;if(a===null){b=this.pointCoords.splice(0)}else{b=new Array(this.pointCoords.length);a.transform(this.pointCoords,0,b,0,this.numCoords/2)}return b};Path2D.prototype.append=function(c,b){if(c instanceof PathIterator){var e=c;var d=new Array(6);while(!e.isDone()){switch(e.currentSegment(d)){case PathIterator.SEG_MOVETO:if(!b||this.numTypes<1||this.numCoords<1){this.moveTo(d[0],d[1]);break}if(this.pointTypes[this.numTypes-1]!==PathIterator.SEG_CLOSE&&this.pointCoords[this.numCoords-2]===d[0]&&this.pointCoords[this.numCoords-1]===d[1]){break}this.lineTo(d[0],d[1]);break;case PathIterator.SEG_LINETO:this.lineTo(d[0],d[1]);break;case PathIterator.SEG_QUADTO:this.quadTo(d[0],d[1],d[2],d[3]);break;case PathIterator.SEG_CUBICTO:this.curveTo(d[0],d[1],d[2],d[3],d[4],d[5]);break;case PathIterator.SEG_CLOSE:this.closePath();break}e.next();b=false}}else{if(typeof c==="object"){this.append(c.getPathIterator(null),b)}else{var a=c;var f=b;this.pointCoords[this.numCoords++]=a;this.pointCoords[this.numCoords++]=f}}};Point2D.prototype.getPoint=function(a){return new Point2D(this.pointCoords[a],this.pointCoords[a+1])};Path2D.prototype.needRoom=function(b,d){if(b&&this.numTypes===0){throw new IllegalPathStateException("missing initial moveto in path definition")}var a=this.pointTypes.length;if(this.numTypes>=a){var c=a;if(c>Point2D.EXPAND_MAX){c=Point2D.EXPAND_MAX}this.pointTypes.push.apply(this.pointTypes,new Array(c))}a=this.pointCoords.length;if(this.numCoords+d>a){var c=a;if(c>Point2D.EXPAND_MAX*2){c=Point2D.EXPAND_MAX*2}if(c<d){c=d}this.pointCoords.push.apply(this.pointCoords,new Array(c))}};Path2D.prototype.moveTo=function(a,b){if(this.numTypes>0&&this.pointTypes[this.numTypes-1]===PathIterator.SEG_MOVETO){this.pointCoords[this.numCoords-2]=a;this.pointCoords[this.numCoords-1]=b}else{this.needRoom(false,2);this.pointTypes[this.numTypes++]=PathIterator.SEG_MOVETO;this.pointCoords[this.numCoords++]=a;this.pointCoords[this.numCoords++]=b}};Path2D.prototype.lineTo=function(a,b){this.needRoom(true,2);this.pointTypes[this.numTypes++]=PathIterator.SEG_LINETO;this.pointCoords[this.numCoords++]=a;this.pointCoords[this.numCoords++]=b};Path2D.prototype.quadTo=function(b,d,a,c){this.needRoom(true,4);this.pointTypes[this.numTypes++]=PathIterator.SEG_QUADTO;this.pointCoords[this.numCoords++]=b;this.pointCoords[this.numCoords++]=d;this.pointCoords[this.numCoords++]=a;this.pointCoords[this.numCoords++]=c};Path2D.prototype.curveTo=function(d,f,b,e,a,c){this.needRoom(true,6);this.pointTypes[this.numTypes++]=PathIterator.SEG_CUBICTO;this.pointCoords[this.numCoords++]=d;this.pointCoords[this.numCoords++]=f;this.pointCoords[this.numCoords++]=b;this.pointCoords[this.numCoords++]=e;this.pointCoords[this.numCoords++]=a;this.pointCoords[this.numCoords++]=c};Path2D.prototype.pointCrossings=function(m,l){var c,a,j,g,f,e;var k=this.pointCoords;j=c=k[0];g=a=k[1];var d=0;var n=2;for(var b=1;b<this.numTypes;b++){switch(this.pointTypes[b]){case PathIterator.SEG_MOVETO:if(g!==a){d+=Curve.pointCrossingsForLine(m,l,j,g,c,a)}c=j=k[n++];a=g=k[n++];break;case PathIterator.SEG_LINETO:d+=Curve.pointCrossingsForLine(m,l,j,g,f=k[n++],e=k[n++]);j=f;g=e;break;case PathIterator.SEG_QUADTO:d+=Curve.pointCrossingsForQuad(m,l,j,g,k[n++],k[n++],f=k[n++],e=k[n++],0);j=f;g=e;break;case PathIterator.SEG_CUBICTO:d+=Curve.pointCrossingsForCubic(m,l,j,g,k[n++],k[n++],k[n++],k[n++],f=k[n++],e=k[n++],0);j=f;g=e;break;case PathIterator.SEG_CLOSE:if(g!==a){d+=Curve.pointCrossingsForLine(m,l,j,g,c,a)}j=c;g=a;break}}if(g!==a){d+=Curve.pointCrossingsForLine(m,l,j,g,c,a)}return d};Path2D.prototype.rectCrossings=function(a,o,j,b){var n=this.pointCoords;var m,l,e,c,k,g;m=e=n[0];l=c=n[1];var f=0;var p=2;for(var d=1;f!==Curve.RECT_INTERSECTS&&d<this.numTypes;d++){switch(this.pointTypes[d]){case PathIterator.SEG_MOVETO:if(m!==e||l!==c){f=Curve.rectCrossingsForLine(f,a,o,j,b,m,l,e,c)}e=m=n[p++];c=l=n[p++];break;case PathIterator.SEG_LINETO:f=Curve.rectCrossingsForLine(f,a,o,j,b,m,l,k=n[p++],g=n[p++]);m=k;l=g;break;case PathIterator.SEG_QUADTO:f=Curve.rectCrossingsForQuad(f,a,o,j,b,m,l,n[p++],n[p++],k=n[p++],g=n[p++],0);m=k;l=g;break;case PathIterator.SEG_CUBICTO:f=Curve.rectCrossingsForCubic(f,a,o,j,b,m,l,n[p++],n[p++],n[p++],n[p++],k=n[p++],g=n[p++],0);m=k;l=g;break;case PathIterator.SEG_CLOSE:if(m!==e||l!==c){f=Curve.rectCrossingsForLine(f,a,o,j,b,m,l,e,c)}m=e;l=c;break}}if(f!==Curve.RECT_INTERSECTS&&(m!==e||l!==c)){f=Curve.rectCrossingsForLine(f,a,o,j,b,m,l,e,c)}return f};Path2D.prototype.transform=function(a){a.transform(this.pointCoords,0,this.pointCoords,0,this.numCoords/2)};Path2D.prototype.getBounds2D=function(){var c,f,b,e;var d=this.numCoords;if(d>0){f=e=this.pointCoords[--d];c=b=this.pointCoords[--d];while(d>0){var g=this.pointCoords[--d];var a=this.pointCoords[--d];if(a<c){c=a}if(g<f){f=g}if(a>b){b=a}if(g>e){e=g}}}else{c=f=b=e=0}return new Rectangle2D(c,f,b-c,e-f)};Path2D.prototype.closePath=function(){if(this.numTypes===0||this.pointTypes[this.numTypes-1]!==PathIterator.SEG_CLOSE){this.needRoom(true,0);this.pointTypes[this.numTypes++]=PathIterator.SEG_CLOSE}};Path2D.prototype.getWindingRule=function(){return this.windingRule};Path2D.prototype.setWindingRule=function(a){if(a!==PathIterator.WIND_EVEN_ODD&&a!==PathIterator.WIND_NON_ZERO){throw new IllegalArgumentException("winding rule must be WIND_EVEN_ODD or WIND_NON_ZERO")}this.windingRule=a};Path2D.prototype.getCurrentPoint=function(){var a=this.numCoords;if(this.numTypes<1||a<1){return null}if(this.pointTypes[this.numTypes-1]===PathIterator.SEG_CLOSE){loop:for(var b=this.numTypes-2;b>0;b--){switch(this.pointTypes[b]){case PathIterator.SEG_MOVETO:break loop;case PathIterator.SEG_LINETO:a-=2;break;case PathIterator.SEG_QUADTO:a-=4;break;case PathIterator.SEG_CUBICTO:a-=6;break;case PathIterator.SEG_CLOSE:break}}}return this.getPoint(a-2)};Path2D.prototype.reset=function(){this.numTypes=this.numCoords=0};Path2D.prototype.createTransformedShape=function(a){var b=this.clone();if(a!=null){b.transform(a)}return b};Path2D.contains=function(c,i,f,j,d){if(f===undefined){if(i instanceof Rectangle2D){var a=i;return Path2D.contains(c,a.getX(),a.getY(),a.getWidth(),a.getHeight())}else{var b=i;return Path2D.contains(c,b.getX(),b.getY())}}else{if(j===undefined){if(i*0+f*0===0){var k=(c.getWindingRule()===PathIterator.WIND_NON_ZERO?-1:1);var g=Curve.pointCrossingsForPath(c,i,f);return((g&k)!==0)}else{return false}}else{if(isNaN(i+j)||isNaN(f+d)){return false}if(j<=0||d<=0){return false}var k=(c.getWindingRule()===PathIterator.WIND_NON_ZERO?-1:2);var e=Curve.rectCrossingsForPath(c,i,f,i+j,f+d);return(e!==Curve.RECT_INTERSECTS&&(e&k)!==0)}}};Path2D.prototype.contains=function(a,i,c,e){if(i===undefined){if(a instanceof Rectangle2D){var f=a;return this.contains(f.getX(),f.getY(),f.getWidth(),f.getHeight())}else{var g=a;return this.contains(g.getX(),g.getY())}}else{if(c===undefined){if(a*0+i*0===0){if(this.numTypes<2){return false}var b=(this.windingRule===PathIterator.WIND_NON_ZERO?-1:1);return((this.pointCrossings(a,i)&b)!==0)}else{return false}}else{if(isNaN(a+c)||isNaN(i+e)){return false}if(c<=0||e<=0){return false}var b=(this.windingRule===PathIterator.WIND_NON_ZERO?-1:2);var d=this.rectCrossings(a,i,a+c,i+e);return(d!==Curve.RECT_INTERSECTS&&(d&b)!==0)}}};Path2D.intersects=function(g,a,i,c,e){if(i===undefined){var f=a;return Path2D.intersects(g,f.getX(),f.getY(),f.getWidth(),f.getHeight())}else{if(isNaN(a+c)||isNaN(i+e)){return false}if(c<=0||e<=0){return false}var b=(g.getWindingRule()===PathIterator.WIND_NON_ZERO?-1:2);var d=Curve.rectCrossingsForPath(g,a,i,a+c,i+e);return(d===Curve.RECT_INTERSECTS||(d&b)!==0)}};Path2D.prototype.intersects=function(a,g,c,e){if(g===undefined){var f=g;return this.intersects(f.getX(),f.getY(),f.getWidth(),f.getHeight())}else{if(e===undefined){if(isNaN(a+c)||isNaN(g+e)){return false}if(c<=0||e<=0){return false}var b=(this.windingRule===PathIterator.WIND_NON_ZERO?-1:2);var d=this.rectCrossings(a,g,a+c,g+e);return(d===Curve.RECT_INTERSECTS||(d&b)!==0)}}};Path2D.prototype.getPathIterator=function(a,b){if(b===undefined){if(a===null){return new Path2DCopyIterator(this)}else{return new Path2DTxIterator(this,a)}}else{return new FlatteningPathIterator(this.getPathIterator(a),b)}};Path2D.prototype.clone=function(){if(this instanceof GeneralPath){return new GeneralPath(this)}else{return new Path2D(this)}};function Path2DIterator(a){this.path=a;this.typeIdx=0;this.pointIdx=0}Path2DIterator.prototype=Object.create(PathIterator.prototype);Path2DIterator.prototype.constructor=Path2DIterator;Path2DIterator.curvecoords=[2,2,4,6,0];Path2DIterator.prototype.getWindingRule=function(){return this.path.getWindingRule()};Path2DIterator.prototype.isDone=function(){return(this.typeIdx>=this.path.numTypes)};Path2DIterator.prototype.next=function(){var a=this.path.pointTypes[this.typeIdx++];this.pointIdx+=Path2DIterator.curvecoords[a]};function Path2DCopyIterator(a){Path2DIterator.call(this,a);this.pointCoords=a.pointCoords}Path2DCopyIterator.prototype=Object.create(Path2DIterator.prototype);Path2DCopyIterator.prototype.constructor=Path2DCopyIterator;Path2DCopyIterator.prototype.currentSegment=function(c){var a=this.path.pointTypes[this.typeIdx];var b=Path2DIterator.curvecoords[a];if(b>0){System.arraycopy(this.pointCoords,this.pointIdx,c,0,b)}return a};function Path2DTxIterator(b,a){Path2DIterator.call(this,b);this.pointCoords=b.pointCoords;this.affine=a}Path2DTxIterator.prototype=Object.create(Path2DIterator.prototype);Path2DTxIterator.prototype.constructor=Path2DTxIterator;Path2DTxIterator.prototype.currentSegment=function(c){var a=this.path.pointTypes[this.typeIdx];var b=Path2DIterator.curvecoords[a];if(b>0){this.affine.transform(this.pointCoords,this.pointIdx,c,0,b/2)}return a};function FlatteningPathIterator(c,b,a){this.hold=new Array(14);this.curx=0;this.cury=0;this.movx=0;this.movy=0;this.holdType=0;this.holdEnd=0;this.holdIndex=0;this.levelIndex=0;this.done=false;if(a===undefined){a=10}if(b<0){throw new IllegalArgumentException("flatness must be >= 0")}if(a<0){throw new IllegalArgumentException("limit must be >= 0")}this.src=c;this.squareflat=b*b;this.limit=a;this.levels=new Array(a+1);this.next(false)}FlatteningPathIterator.prototype=Object.create(PathIterator.prototype);FlatteningPathIterator.prototype.constructor=FlatteningPathIterator;FlatteningPathIterator.GROW_SIZE=24;FlatteningPathIterator.prototype.getFlatness=function(){return Math.sqrt(this.squareflat)};FlatteningPathIterator.prototype.getRecursionLimit=function(){return this.limit};FlatteningPathIterator.prototype.getWindingRule=function(){return this.src.getWindingRule()};FlatteningPathIterator.prototype.isDone=function(){return this.done};FlatteningPathIterator.prototype.ensureHoldCapacity=function(c){if(this.holdIndex-c<0){var b=this.hold.length-this.holdIndex;var a=this.hold.length+FlatteningPathIterator.GROW_SIZE;var d=new Array(a);System.arraycopy(this.hold,this.holdIndex,d,this.holdIndex+FlatteningPathIterator.GROW_SIZE,b);this.hold=d;this.holdIndex+=FlatteningPathIterator.GROW_SIZE;this.holdEnd+=FlatteningPathIterator.GROW_SIZE}};FlatteningPathIterator.prototype.next=function(a){if(a===undefined){a=true}var b;if(this.holdIndex>=this.holdEnd){if(a){this.src.next()}if(this.src.isDone()){this.done=true;return}this.holdType=this.src.currentSegment(this.hold);this.levelIndex=0;this.levels[0]=0}switch(this.holdType){case PathIterator.SEG_MOVETO:case PathIterator.SEG_LINETO:this.curx=this.hold[0];this.cury=this.hold[1];if(this.holdType===PathIterator.SEG_MOVETO){this.movx=this.curx;this.movy=this.cury}this.holdIndex=0;this.holdEnd=0;break;case PathIterator.SEG_CLOSE:this.curx=this.movx;this.cury=this.movy;this.holdIndex=0;this.holdEnd=0;break;case PathIterator.SEG_QUADTO:if(this.holdIndex>=this.holdEnd){this.holdIndex=this.hold.length-6;this.holdEnd=this.hold.length-2;this.hold[this.holdIndex+0]=this.curx;this.hold[this.holdIndex+1]=this.cury;this.hold[this.holdIndex+2]=this.hold[0];this.hold[this.holdIndex+3]=this.hold[1];this.hold[this.holdIndex+4]=this.curx=this.hold[2];this.hold[this.holdIndex+5]=this.cury=this.hold[3]}b=this.levels[this.levelIndex];while(b<this.limit){if(QuadCurve2D.getFlatnessSq(this.hold,this.holdIndex)<this.squareflat){break}this.ensureHoldCapacity(4);QuadCurve2D.subdivide(this.hold,this.holdIndex,this.hold,this.holdIndex-4,this.hold,this.holdIndex);this.holdIndex-=4;b++;this.levels[this.levelIndex]=b;this.levelIndex++;this.levels[this.levelIndex]=b}this.holdIndex+=4;this.levelIndex--;break;case PathIterator.SEG_CUBICTO:if(this.holdIndex>=this.holdEnd){this.holdIndex=this.hold.length-8;this.holdEnd=this.hold.length-2;this.hold[this.holdIndex+0]=this.curx;this.hold[this.holdIndex+1]=this.cury;this.hold[this.holdIndex+2]=this.hold[0];this.hold[this.holdIndex+3]=this.hold[1];this.hold[this.holdIndex+4]=this.hold[2];this.hold[this.holdIndex+5]=this.hold[3];this.hold[this.holdIndex+6]=this.curx=this.hold[4];this.hold[this.holdIndex+7]=this.cury=this.hold[5]}b=this.levels[this.levelIndex];while(b<this.limit){if(CubicCurve2D.getFlatnessSq(this.hold,this.holdIndex)<this.squareflat){break}this.ensureHoldCapacity(6);CubicCurve2D.subdivide(this.hold,this.holdIndex,this.hold,this.holdIndex-6,this.hold,this.holdIndex);this.holdIndex-=6;b++;this.levels[this.levelIndex]=b;this.levelIndex++;this.levels[this.levelIndex]=b}this.holdIndex+=6;this.levelIndex--;break}};FlatteningPathIterator.prototype.currentSegment=function(b){if(this.isDone()){throw new NoSuchElementException("flattening iterator out of bounds")}var a=this.holdType;if(a!==PathIterator.SEG_CLOSE){b[0]=this.hold[this.holdIndex+0];b[1]=this.hold[this.holdIndex+1];if(a!==PathIterator.SEG_MOVETO){a=PathIterator.SEG_LINETO}}return a};function GeneralPath(c,g,e,a,f){if(c===undefined){Path2D.call(this,PathIterator.WIND_NON_ZERO,Point2D.INIT_SIZE)}else{if(g===undefined){if(typeof c==="object"){var d=c;Path2D.call(this,d,null)}else{Path2D.call(this,c,Point2D.INIT_SIZE)}}else{if(e===undefined){var i=c;var b=g;Path2D.call(this,i,b)}else{this.windingRule=c;this.pointTypes=g;this.numTypes=e;this.pointCoords=a;this.numCoords=f}}}}GeneralPath.prototype=Object.create(Path2D.prototype);GeneralPath.prototype.constructor=GeneralPath;GeneralPath.intersects=Path2D.intersects;GeneralPath.contains=Path2D.contains;function QuadCurve2D(b,e,f,d,a,c){if(b===undefined){this.setCurve(0,0,0,0,0,0)}else{this.setCurve(b,e,f,d,a,c)}}QuadCurve2D.BELOW=-2;QuadCurve2D.LOWEDGE=-1;QuadCurve2D.INSIDE=0;QuadCurve2D.HIGHEDGE=1;QuadCurve2D.ABOVE=2;QuadCurve2D.prototype.getX1=function(){return this.x1};QuadCurve2D.prototype.getY1=function(){return this.y1};QuadCurve2D.prototype.getP1=function(){return new Point2D(this.x1,this.y1)};QuadCurve2D.prototype.getCtrlX=function(){return this.ctrlx};QuadCurve2D.prototype.getCtrlY=function(){return this.ctrly};QuadCurve2D.prototype.getCtrlPt=function(){return new Point2D(this.ctrlx,this.ctrly)};QuadCurve2D.prototype.getX2=function(){return this.x2};QuadCurve2D.prototype.getY2=function(){return this.y2};QuadCurve2D.prototype.getP2=function(){return new Point2D(this.x2,this.y2)};QuadCurve2D.prototype.setCurve=function(e,l,d,a,b,j){if(l===undefined){var i=e;this.setCurve(i.getX1(),i.getY1(),i.getCtrlX(),i.getCtrlY(),i.getX2(),i.getY2())}else{if(d===undefined){var f=l;if(n[0] instanceof Point2D){var k=e;this.setCurve(k[f+0],k[f+1],k[f+2],k[f+3],k[f+4],k[f+5])}else{var o=e;this.setCurve(o[f+0].getX(),o[f+0].getY(),o[f+1].getX(),o[f+1].getY(),o[f+2].getX(),o[f+2].getY())}}else{if(a===undefined){var n=e;var g=l;var m=d;this.setCurve(n.getX(),n.getY(),g.getX(),g.getY(),m.getX(),m.getY())}else{this.x1=e;this.y1=l;this.ctrlx=d;this.ctrly=a;this.x2=b;this.y2=j}}}};QuadCurve2D.prototype.getBounds2D=function(){var d=Math.min(Math.min(this.x1,this.x2),this.ctrlx);var c=Math.min(Math.min(this.y1,this.y2),this.ctrly);var b=Math.max(Math.max(this.x1,this.x2),this.ctrlx);var a=Math.max(Math.max(this.y1,this.y2),this.ctrly);return new Rectangle2D(d,c,b-d,a-c)};QuadCurve2D.getFlatnessSq=function(b,e,f,d,a,c){if(f===undefined){var g=b;var i=e;return Line2D.ptSegDistSq(g[i+0],g[i+1],g[i+4],g[i+5],g[i+2],g[i+3])}else{return Line2D.ptSegDistSq(b,e,a,c,f,d)}};QuadCurve2D.prototype.getFlatnessSq=function(){return Line2D.ptSegDistSq(this.getX1(),this.getY1(),this.getX2(),this.getY2(),this.getCtrlX(),this.getCtrlY())};QuadCurve2D.getFlatness=function(b,e,f,d,a,c){if(f===undefined){var g=b;var i=e;return Line2D.ptSegDist(g[i+0],g[i+1],g[i+4],g[i+5],g[i+2],g[i+3])}else{return Line2D.ptSegDist(b,e,a,c,f,d)}};QuadCurve2D.prototype.getFlatness=function(){return Line2D.ptSegDist(this.getX1(),this.getY1(),this.getX2(),this.getY2(),this.getCtrlX(),this.getCtrlY())};QuadCurve2D.prototype.subdivide=function(b,a){QuadCurve2D.subdivide(this,b,a)};QuadCurve2D.subdivide=function(a,l,j,n,q,b){if(n===undefined){q=j;j=l;var g=a.getX1();var o=a.getY1();var f=a.getCtrlX();var d=a.getCtrlY();var c=a.getX2();var k=a.getY2();var i=(g+f)/2;var p=(o+d)/2;var e=(c+f)/2;var m=(k+d)/2;f=(i+e)/2;d=(p+m)/2;if(j!==null){j.setCurve(g,o,i,p,f,d)}if(q!==null){q.setCurve(f,d,e,m,c,k)}}else{var g=a[l+0];var o=a[l+1];var f=a[l+2];var d=a[l+3];var c=a[l+4];var k=a[l+5];if(j!==null){j[n+0]=g;j[n+1]=o}if(q!==null){q[b+4]=c;q[b+5]=k}g=(g+f)/2;o=(o+d)/2;c=(c+f)/2;k=(k+d)/2;f=(g+c)/2;d=(o+k)/2;if(j!==null){j[n+2]=g;j[n+3]=o;j[n+4]=f;j[n+5]=d}if(q!==null){q[b+0]=f;q[b+1]=d;q[b+2]=c;q[b+3]=k}}};QuadCurve2D.solveQuadratic=function(k,i){if(i===undefined){return QuadCurve2D.solveQuadratic(k,k)}else{var g=[0,0];var e=k[1];var m=k[0];var f=0;if(g===0){if(e===0){return -1}i[f++]=-m/e}else{var l=e*e-4*g*m;if(l<0){return 0}l=Math.sqrt(l);if(e<0){l=-l}var j=(e+l)/-2;i[f++]=j/g;if(j!==0){i[f++]=m/j}}return f}};QuadCurve2D.prototype.contains=function(g,f){if(f===undefined){var m=g;return this.contains(m.getX(),m.getY())}else{var r=this.getX1();var d=this.getY1();var n=this.getCtrlX();var a=this.getCtrlY();var q=this.getX2();var c=this.getY2();var t=r-2*n+q;var s=d-2*a+c;var k=g-r;var i=f-d;var u=q-r;var e=c-d;var j=(k*s-i*t)/(u*s-e*t);if(j<0||j>1||j!==j){return false}var o=t*j*j+2*(n-r)*j+r;var b=s*j*j+2*(a-d)*j+d;var l=u*j+r;var v=e*j+d;return(g>=o&&g<l)||(g>=l&&g<o)||(f>=b&&f<v)||(f>=v&&f<b)}};QuadCurve2D.fillEqn=function(d,e,b,c,a){d[0]=b-e;d[1]=c+c-b-b;d[2]=b-c-c+a};QuadCurve2D.evalQuadratic=function(k,g,n,l,a,f,b,d){var c=0;for(var e=0;e<g;e++){var o=k[e];if((n?o>=0:o>0)&&(l?o<=1:o<1)&&(a===null||a[1]+2*a[2]*o!==0)){var m=1-o;k[c++]=f*m*m+2*b*o*m+d*o*o}}return c};QuadCurve2D.getTag=function(c,a,b){if(c<=a){return(c<a?QuadCurve2D.BELOW:QuadCurve2D.LOWEDGE)}if(c>=b){return(c>b?QuadCurve2D.ABOVE:QuadCurve2D.HIGHEDGE)}return QuadCurve2D.INSIDE};QuadCurve2D.inwards=function(c,b,a){switch(c){case QuadCurve2D.BELOW:case QuadCurve2D.ABOVE:default:return false;case QuadCurve2D.LOWEDGE:return(b>=QuadCurve2D.INSIDE||a>=QuadCurve2D.INSIDE);case QuadCurve2D.INSIDE:return true;case QuadCurve2D.HIGHEDGE:return(b<=QuadCurve2D.INSIDE||a<=QuadCurve2D.INSIDE)}};QuadCurve2D.prototype.intersects=function(j,i,n,z){if(i===undefined){var s=j;return this.intersects(s.getX(),s.getY(),s.getWidth(),s.getHeight())}else{if(n<=0||z<=0){return false}var B=this.getX1();var d=this.getY1();var e=QuadCurve2D.getTag(B,j,j+n);var D=QuadCurve2D.getTag(d,i,i+z);if(e===QuadCurve2D.INSIDE&&D===QuadCurve2D.INSIDE){return true}var A=this.getX2();var b=this.getY2();var p=QuadCurve2D.getTag(A,j,j+n);var a=QuadCurve2D.getTag(b,i,i+z);if(p===QuadCurve2D.INSIDE&&a===QuadCurve2D.INSIDE){return true}var u=this.getCtrlX();var t=this.getCtrlY();var E=QuadCurve2D.getTag(u,j,j+n);var c=QuadCurve2D.getTag(t,i,i+z);if(e<QuadCurve2D.INSIDE&&p<QuadCurve2D.INSIDE&&E<QuadCurve2D.INSIDE){return false}if(D<QuadCurve2D.INSIDE&&a<QuadCurve2D.INSIDE&&c<QuadCurve2D.INSIDE){return false}if(e>QuadCurve2D.INSIDE&&p>QuadCurve2D.INSIDE&&E>QuadCurve2D.INSIDE){return false}if(D>QuadCurve2D.INSIDE&&a>QuadCurve2D.INSIDE&&c>QuadCurve2D.INSIDE){return false}if(QuadCurve2D.inwards(e,p,E)&&QuadCurve2D.inwards(D,a,c)){return true}if(QuadCurve2D.inwards(p,e,E)&&QuadCurve2D.inwards(a,D,c)){return true}var m=(e*p<=0);var C=(D*a<=0);if(e===QuadCurve2D.INSIDE&&p===QuadCurve2D.INSIDE&&C){return true}if(D===QuadCurve2D.INSIDE&&a===QuadCurve2D.INSIDE&&m){return true}var G=[0,0,0];var F=[0,0,0];if(!C){QuadCurve2D.fillEqn(G,(D<QuadCurve2D.INSIDE?i:i+z),d,t,b);return(QuadCurve2D.solveQuadratic(G,F)===2&&QuadCurve2D.evalQuadratic(F,2,true,true,null,B,u,A)===2&&QuadCurve2D.getTag(F[0],j,j+n)*QuadCurve2D.getTag(F[1],j,j+n)<=0)}if(!m){QuadCurve2D.fillEqn(G,(e<QuadCurve2D.INSIDE?j:j+n),B,u,A);return(QuadCurve2D.solveQuadratic(G,F)===2&&QuadCurve2D.evalQuadratic(F,2,true,true,null,d,t,b)===2&&QuadCurve2D.getTag(F[0],i,i+z)*QuadCurve2D.getTag(F[1],i,i+z)<=0)}var o=A-B;var l=b-d;var v=b*B-A*d;var g,q;if(D===QuadCurve2D.INSIDE){g=e}else{g=QuadCurve2D.getTag((v+o*(D<QuadCurve2D.INSIDE?i:i+z))/l,j,j+n)}if(a===QuadCurve2D.INSIDE){q=p}else{q=QuadCurve2D.getTag((v+o*(a<QuadCurve2D.INSIDE?i:i+z))/l,j,j+n)}if(g*q<=0){return true}g=((g*e<=0)?D:a);QuadCurve2D.fillEqn(G,(q<QuadCurve2D.INSIDE?j:j+n),B,u,A);var f=QuadCurve2D.solveQuadratic(G,F);QuadCurve2D.evalQuadratic(F,f,true,true,null,d,t,b);q=QuadCurve2D.getTag(F[0],i,i+z);return(g*q<=0)}};QuadCurve2D.prototype.contains=function(a,e,b,c){if(e===undefined){var d=a;return this.contains(d.getX(),d.getY(),d.getWidth(),d.getHeight())}else{if(b<=0||c<=0){return false}return(this.contains(a,e)&&this.contains(a+b,e)&&this.contains(a+b,e+c)&&this.contains(a,e+c))}};QuadCurve2D.prototype.getPathIterator=function(a,b){if(b===undefined){return new QuadIterator(this,a)}else{return new FlatteningPathIterator(this.getPathIterator(a),b)}};QuadCurve2D.prototype.clone=function(){return new QuadCurve2D(this.x1,this.y1,this.ctrlx,this.ctrly,this.x2,this.y2)};function QuadIterator(b,a){this.quad=b;this.affine=a;this.index=0}QuadIterator.prototype=Object.create(PathIterator.prototype);QuadIterator.prototype.constructor=QuadIterator;QuadIterator.prototype.getWindingRule=function(){return PathIterator.WIND_NON_ZERO};QuadIterator.prototype.isDone=function(){return(this.index>1)};QuadIterator.prototype.next=function(){this.index++};QuadIterator.prototype.currentSegment=function(b){if(this.isDone()){throw new NoSuchElementException("quad iterator iterator out of bounds")}var a;if(this.index===0){b[0]=this.quad.getX1();b[1]=this.quad.getY1();a=PathIterator.SEG_MOVETO}else{b[0]=this.quad.getCtrlX();b[1]=this.quad.getCtrlY();b[2]=this.quad.getX2();b[3]=this.quad.getY2();a=PathIterator.SEG_QUADTO}if(this.affine!==null){this.affine.transform(b,0,b,0,this.index===0?1:2)}return a};function CubicCurve2D(c,g,e,i,b,f,a,d){if(c===undefined){this.setCurve(0,0,0,0,0,0,0,0)}else{this.setCurve(c,g,e,i,b,f,a,d)}}CubicCurve2D.prototype.getX1=function(){return this.x1};CubicCurve2D.prototype.getY1=function(){return this.y1};CubicCurve2D.prototype.getP1=function(){return new Point2D.Float(this.x1,this.y1)};CubicCurve2D.prototype.getCtrlX1=function(){return this.ctrlx1};CubicCurve2D.prototype.getCtrlY1=function(){return this.ctrly1};CubicCurve2D.prototype.getCtrlP1=function(){return new Point2D.Float(this.ctrlx1,this.ctrly1)};CubicCurve2D.prototype.getCtrlX2=function(){return this.ctrlx2};CubicCurve2D.prototype.getCtrlY2=function(){return this.ctrly2};CubicCurve2D.prototype.getCtrlP2=function(){return new Point2D.Float(this.ctrlx2,this.ctrly2)};CubicCurve2D.prototype.getX2=function(){return this.x2};CubicCurve2D.prototype.getY2=function(){return this.y2};CubicCurve2D.prototype.getP2=function(){return new Point2D.Float(this.x2,this.y2)};CubicCurve2D.prototype.setCurve=function(b,m,e,o,d,n,a,k){if(m===undefined){var j=b;this.setCurve(j.getX1(),j.getY1(),j.getCtrlX1(),j.getCtrlY1(),j.getCtrlX2(),j.getCtrlY2(),j.getX2(),j.getY2())}else{if(e===undefined){var g=m;if(b[0] instanceof Point2D){var r=b;this.setCurve(r[g+0].getX(),r[g+0].getY(),r[g+1].getX(),r[g+1].getY(),r[g+2].getX(),r[g+2].getY(),r[g+3].getX(),r[g+3].getY())}else{var l=b;this.setCurve(l[g+0],l[g+1],l[g+2],l[g+3],l[g+4],l[g+5],l[g+6],l[g+7])}}else{if(d===undefined){var q=b;var i=m;var f=e;var p=o;this.setCurve(q.getX(),q.getY(),i.getX(),i.getY(),f.getX(),f.getY(),p.getX(),p.getY())}else{this.x1=b;this.y1=m;this.ctrlx1=e;this.ctrly1=o;this.ctrlx2=d;this.ctrly2=n;this.x2=a;this.y2=k}}}};CubicCurve2D.prototype.getBounds2D=function(){var d=Math.min(Math.min(this.x1,this.x2),Math.min(this.ctrlx1,this.ctrlx2));var c=Math.min(Math.min(this.y1,this.y2),Math.min(this.ctrly1,this.ctrly2));var b=Math.max(Math.max(this.x1,this.x2),Math.max(this.ctrlx1,this.ctrlx2));var a=Math.max(Math.max(this.y1,this.y2),Math.max(this.ctrly1,this.ctrly2));return new Rectangle2D(d,c,b-d,a-c)};CubicCurve2D.getFlatnessSq=function(b,i,d,k,c,j,a,f){if(d===undefined){var g=b;var e=i;return this.getFlatnessSq(g[e+0],g[e+1],g[e+2],g[e+3],g[e+4],g[e+5],g[e+6],g[e+7])}else{return Math.max(Line2D.ptSegDistSq(b,i,a,f,d,k),Line2D.ptSegDistSq(b,i,a,f,c,j))}};CubicCurve2D.getFlatness=function(b,i,d,k,c,j,a,f){if(d===undefined){var g=b;var e=i;return this.getFlatness(g[e+0],g[e+1],g[e+2],g[e+3],g[e+4],g[e+5],g[e+6],g[e+7])}else{return Math.sqrt(this.getFlatnessSq(b,i,d,k,c,j,a,f))}};CubicCurve2D.prototype.getFlatnessSq=function(){return CubicCurve2D.getFlatnessSq(this.getX1(),this.getY1(),this.getCtrlX1(),this.getCtrlY1(),this.getCtrlX2(),this.getCtrlY2(),this.getX2(),this.getY2())};CubicCurve2D.prototype.getFlatness=function(){return CubicCurve2D.getFlatness(this.getX1(),this.getY1(),this.getCtrlX1(),this.getCtrlY1(),this.getCtrlX2(),this.getCtrlY2(),this.getX2(),this.getY2())};CubicCurve2D.prototype.subdivide=function(b,a){CubicCurve2D.subdivide(this,b,a)};CubicCurve2D.subdivide=function(k,f,j,a,u,e){if(a===undefined){u=j;j=f;var t=k.getX1();var d=k.getY1();var i=k.getCtrlX1();var n=k.getCtrlY1();var g=k.getCtrlX2();var m=k.getCtrlY2();var r=k.getX2();var b=k.getY2();var q=(i+g)/2;var p=(n+m)/2;i=(t+i)/2;n=(d+n)/2;g=(r+g)/2;m=(b+m)/2;var s=(i+q)/2;var l=(n+p)/2;var c=(g+q)/2;var o=(m+p)/2;q=(s+c)/2;p=(l+o)/2;if(j!==null){j.setCurve(t,d,i,n,s,l,q,p)}if(u!==null){u.setCurve(q,p,c,o,g,m,r,b)}}else{var t=k[f+0];var d=k[f+1];var i=k[f+2];var n=k[f+3];var g=k[f+4];var m=k[f+5];var r=k[f+6];var b=k[f+7];if(j!==null){j[a+0]=t;j[a+1]=d}if(u!==null){u[e+6]=r;u[e+7]=b}t=(t+i)/2;d=(d+n)/2;r=(r+g)/2;b=(b+m)/2;var q=(i+g)/2;var p=(n+m)/2;i=(t+q)/2;n=(d+p)/2;g=(r+q)/2;m=(b+p)/2;q=(i+g)/2;p=(n+m)/2;if(j!==null){j[a+2]=t;j[a+3]=d;j[a+4]=i;j[a+5]=n;j[a+6]=q;j[a+7]=p}if(u!==null){u[e+0]=q;u[e+1]=p;u[e+2]=g;u[e+3]=m;u[e+4]=r;u[e+5]=b}}};CubicCurve2D.solveCubic=function(H,I){if(I===undefined){return CubicCurve2D.solveCubic(H,H)}else{var E=H[3];if(E===0){return QuadCurve2D.solveQuadratic(H,I)}var s=H[2]/E;var o=H[1]/E;var m=H[0]/E;var n=s*s;var y=1/3*(-1/3*n+o);var r=1/2*(2/27*s*n-1/3*s*o+m);var G=y*y*y;var l=r*r+G;var f=1/3*s;var e;if(l<0){var a=1/3*Math.acos(-r/Math.sqrt(-G));var k=2*Math.sqrt(-y);if(I===H){H=H.slice(0,4);while(H.length<4){H.push(0)}}I[0]=(k*Math.cos(a));I[1]=(-k*Math.cos(a+Math.PI/3));I[2]=(-k*Math.cos(a-Math.PI/3));e=3;for(var z=0;z<e;++z){I[z]-=f}}else{var F=Math.sqrt(l);var j=Math.cbrt(F-r);var g=-Math.cbrt(F+r);var c=j+g;e=1;var b=1200000000*CubicCurve2D.ulp(Math.abs(c)+Math.abs(f));if(CubicCurve2D.iszero(l,b)||CubicCurve2D.within(j,g,b)){if(I===H){H=H.slice(0,4);while(H.length<4){H.push(0)}}I[1]=-(c/2)-f;e=2}I[0]=c-f}if(e>1){e=CubicCurve2D.fixRoots(H,I,e)}if(e>2&&(I[2]===I[1]||I[2]===I[0])){e--}if(e>1&&I[1]===I[0]){I[1]=I[--e]}return e}};CubicCurve2D.fixRoots=function(s,t,g){var c=[s[1],2*s[2],3*s[3]];var l=QuadCurve2D.solveQuadratic(c,c);if(l===2&&c[0]===c[1]){l--}if(l===2&&c[0]>c[1]){var r=c[0];c[0]=c[1];c[1]=r}if(g===3){var n=CubicCurve2D.getRootUpperBound(s);var q=-n;var j=t.slice(0,g).sort();if(g<t.length){j.push.apply(j,t.slice(g))}t=j;if(l===2){t[0]=CubicCurve2D.refineRootWithHint(s,q,c[0],t[0]);t[1]=CubicCurve2D.refineRootWithHint(s,c[0],c[1],t[1]);t[2]=CubicCurve2D.refineRootWithHint(s,c[1],n,t[2]);return 3}else{if(l===1){var a=s[3];var f=-a;var p=c[0];var e=CubicCurve2D.solveEqn(s,3,p);if(CubicCurve2D.oppositeSigns(f,e)){t[0]=CubicCurve2D.bisectRootWithHint(s,q,p,t[0])}else{if(CubicCurve2D.oppositeSigns(e,a)){t[0]=CubicCurve2D.bisectRootWithHint(s,p,n,t[2])}else{t[0]=p}}}else{if(l===0){t[0]=CubicCurve2D.bisectRootWithHint(s,q,n,t[1])}}}}else{if(g===2&&l===2){var k=t[0];var d=t[1];var p=c[0];var o=c[1];var i=Math.abs(p-k)>Math.abs(o-k)?p:o;var b=CubicCurve2D.solveEqn(s,3,i);if(CubicCurve2D.iszero(b,10000000*CubicCurve2D.ulp(i))){var m=CubicCurve2D.solveEqn(s,3,d);t[1]=Math.abs(m)<Math.abs(b)?d:i;return 2}}}return 1};CubicCurve2D.refineRootWithHint=function(l,b,g,m){if(!CubicCurve2D.inInterval(m,b,g)){return m}var a=[l[1],2*l[2],3*l[3]];var d=m;for(var c=0;c<3;c++){var e=CubicCurve2D.solveEqn(a,2,m);var f=CubicCurve2D.solveEqn(l,3,m);var k=-(f/e);var j=m+k;if(e===0||f===0||m===j){break}m=j}if(CubicCurve2D.within(m,d,1000*CubicCurve2D.ulp(d))&&CubicCurve2D.inInterval(m,b,g)){return m}return d};CubicCurve2D.bisectRootWithHint=function(j,d,k,f){var b=Math.min(Math.abs(f-d)/64,0.0625);var a=Math.min(Math.abs(f-k)/64,0.0625);var e=f-b;var i=f+a;var g=CubicCurve2D.solveEqn(j,3,e);var c=CubicCurve2D.solveEqn(j,3,i);while(CubicCurve2D.oppositeSigns(g,c)){if(e>=i){return e}d=e;k=i;b/=64;a/=64;e=f-b;i=f+a;g=CubicCurve2D.solveEqn(j,3,e);c=CubicCurve2D.solveEqn(j,3,i)}if(g===0){return e}if(c===0){return i}return CubicCurve2D.bisectRoot(j,d,k)};CubicCurve2D.bisectRoot=function(f,c,e){var b=CubicCurve2D.solveEqn(f,3,c);var a=c+(e-c)/2;while(a!==c&&a!==e){var d=CubicCurve2D.solveEqn(f,3,a);if(d===0){return a}if(CubicCurve2D.oppositeSigns(b,d)){e=a}else{b=d;c=a}a=c+(e-c)/2}return a};CubicCurve2D.inInterval=function(c,b,a){return b<=c&&c<=a};CubicCurve2D.within=function(a,e,b){var c=e-a;return(c<=b&&c>=-b)};CubicCurve2D.iszero=function(a,b){return CubicCurve2D.within(a,0,b)};CubicCurve2D.oppositeSigns=function(b,a){return(b<0&&a>0)||(b>0&&a<0)};CubicCurve2D.solveEqn=function(d,a,c){var b=d[a];while(--a>=0){b=b*c+d[a]}return b};CubicCurve2D.ulp=function(a){a=Number(a);return a<0?CubicCurve2D.nextUp(a)-a:a-(-CubicCurve2D.nextUp(-a))};CubicCurve2D.nextUp=function(d){d=Number(d);if(d!==d){return d}if(d===-Number.POSITIVE_INFINITY){return -Number.MAX_VALUE}if(d===Number.POSITIVE_INFINITY){return Number.POSITIVE_INFINITY}if(d===+Number.MAX_VALUE){return Number.POSITIVE_INFINITY}var g=d*(d<0?1-Number.EPSILON/2:1+Number.EPSILON);if(g===d){var e=Number.MIN_VALUE;if(e===0){e=2.2250738585072014e-308}if(5e-324!==0&&5e-324<e){e=5e-324}g=d+e}if(g===Number.POSITIVE_INFINITY){g=Number.MAX_VALUE}var a=d+(g-d)/2;if(d<a&&a<g){g=a}var f=(g+d)/2;if(d<f&&f<g){g=f}return g===0?-0:g};CubicCurve2D.getRootUpperBound=function(g){var i=g[3];var f=g[2];var e=g[1];var k=g[0];var j=1+Math.max(Math.max(Math.abs(f),Math.abs(e)),Math.abs(k))/Math.abs(i);j+=CubicCurve2D.ulp(j)+1;return j};CubicCurve2D.prototype.contains=function(l,j,m,f){if(j===undefined){if(l instanceof Rectangle2D){var a=l;return this.contains(a.getX(),a.getY(),a.getWidth(),a.getHeight())}else{var c=l;return this.contains(c.getX(),c.getY())}}else{if(m===undefined){if(!(l*0+j*0===0)){return false}var d=this.getX1();var k=this.getY1();var b=this.getX2();var i=this.getY2();var g=(Curve.pointCrossingsForLine(l,j,d,k,b,i)+Curve.pointCrossingsForCubic(l,j,d,k,this.getCtrlX1(),this.getCtrlY1(),this.getCtrlX2(),this.getCtrlY2(),b,i,0));return((g&1)===1)}else{if(m<=0||f<=0){return false}var e=this.rectCrossings(l,j,m,f);return !(e===0||e===Curve.RECT_INTERSECTS)}}};CubicCurve2D.prototype.intersects=function(a,f,b,d){if(f===undefined){var e=a;return this.intersects(e.getX(),e.getY(),e.getWidth(),e.getHeight())}else{if(b<=0||d<=0){return false}var c=this.rectCrossings(a,f,b,d);return c!==0}};CubicCurve2D.prototype.rectCrossings=function(a,e,b,d){var c=0;if(!(this.getX1()===this.getX2()&&this.getY1()===this.getY2())){c=Curve.rectCrossingsForLine(c,a,e,a+b,e+d,this.getX1(),this.getY1(),this.getX2(),this.getY2());if(c===Curve.RECT_INTERSECTS){return c}}return Curve.rectCrossingsForCubic(c,a,e,a+b,e+d,this.getX2(),this.getY2(),this.getCtrlX2(),this.getCtrlY2(),this.getCtrlX1(),this.getCtrlY1(),this.getX1(),this.getY1(),0)};CubicCurve2D.prototype.getPathIterator=function(a,b){if(b===undefined){return new CubicIterator(this,a)}else{return new FlatteningPathIterator(this.getPathIterator(a),b)}};CubicCurve2D.prototype.clone=function(){return new CubicCurve2D(this.x1,this.y1,this.ctrlx1,this.ctrly1,this.ctrlx2,this.ctrly2,this.x2,this.y2)};function CubicIterator(b,a){this.cubic=b;this.affine=a;this.index=0}CubicIterator.prototype=Object.create(PathIterator.prototype);CubicIterator.prototype.constructor=CubicIterator;CubicIterator.prototype.getWindingRule=function(){return PathIterator.WIND_NON_ZERO};CubicIterator.prototype.isDone=function(){return(this.index>1)};CubicIterator.prototype.next=function(){this.index++};CubicIterator.prototype.currentSegment=function(b){if(this.isDone()){throw new NoSuchElementException("cubic iterator iterator out of bounds")}var a;if(this.index===0){b[0]=this.cubic.getX1();b[1]=this.cubic.getY1();a=PathIterator.SEG_MOVETO}else{b[0]=this.cubic.getCtrlX1();b[1]=this.cubic.getCtrlY1();b[2]=this.cubic.getCtrlX2();b[3]=this.cubic.getCtrlY2();b[4]=this.cubic.getX2();b[5]=this.cubic.getY2();a=PathIterator.SEG_CUBICTO}if(this.affine!==null){this.affine.transform(b,0,b,0,this.index===0?1:3)}return a};function Area(a){if(a===undefined){this.curves=[]}else{if(a instanceof Area){this.curves=a.curves}else{this.curves=Area.pathToCurves(a.getPathIterator(null))}}this.cachedBounds=null}Area.pathToCurves=function(d){var l=[];var e=d.getWindingRule();var k=new Array(23);var c=0,b=0;var j=0,i=0;var g,f;while(!d.isDone()){switch(d.currentSegment(k)){case PathIterator.SEG_MOVETO:Curve.insertLine(l,j,i,c,b);j=c=k[0];i=b=k[1];Curve.insertMove(l,c,b);break;case PathIterator.SEG_LINETO:g=k[0];f=k[1];Curve.insertLine(l,j,i,g,f);j=g;i=f;break;case PathIterator.SEG_QUADTO:g=k[2];f=k[3];Curve.insertQuad(l,j,i,k);j=g;i=f;break;case PathIterator.SEG_CUBICTO:g=k[4];f=k[5];Curve.insertCubic(l,j,i,k);j=g;i=f;break;case PathIterator.SEG_CLOSE:Curve.insertLine(l,j,i,c,b);j=c;i=b;break}d.next()}Curve.insertLine(l,j,i,c,b);var a;if(e===PathIterator.WIND_EVEN_ODD){a=new AreaOpEOWindOp()}else{a=new AreaOpNZWindOp()}return a.calculate(l,[])};Area.prototype.add=function(a){this.curves=new AreaOpAddOp().calculate(this.curves,a.curves);this.invalidateBounds()};Area.prototype.subtract=function(a){this.curves=new AreaOpSubOp().calculate(this.curves,a.curves);this.invalidateBounds()};Area.prototype.intersect=function(a){this.curves=new AreaOpIntOp().calculate(this.curves,a.curves);this.invalidateBounds()};Area.prototype.exclusiveOr=function(a){this.curves=new AreaOpXorOp().calculate(this.curves,a.curves);this.invalidateBounds()};Area.prototype.reset=function(){this.curves.length=0;this.invalidateBounds()};Area.prototype.isEmpty=function(){return(this.curves.length===0)};Area.prototype.isPolygonal=function(){for(var a=0;a<this.curves.length;a++){if(this.curves[a].getOrder()>1){return false}}return true};Area.prototype.isRectangular=function(){var b=this.curves.length;if(b===0){return true}if(b>3){return false}var c=this.curves[1];var a=this.curves[2];if(c.getOrder()!==1||a.getOrder()!==1){return false}if(c.getXTop()!==c.getXBot()||a.getXTop()!==a.getXBot()){return false}if(c.getYTop()!==a.getYTop()||c.getYBot()!==a.getYBot()){return false}return true};Area.prototype.isSingular=function(){if(this.curves.length<3){return true}for(var a=1;a<this.curves.length;a++){if(this.curves[a].getOrder()===0){return false}}return true};Area.prototype.invalidateBounds=function(){this.cachedBounds=null};Area.prototype.getCachedBounds=function(){if(this.cachedBounds!==null){return this.cachedBounds}var b=new Rectangle2D();if(this.curves.length>0){var d=this.curves[0];b.setRect(d.getX0(),d.getY0(),0,0);for(var a=1;a<this.curves.length;a++){this.curves[a].enlarge(b)}}return(this.cachedBounds=b)};Area.prototype.getBounds2D=function(){return this.getCachedBounds().getBounds2D()};Area.prototype.clone=function(){return new Area(this)};Area.prototype.equals=function(a){if(a===this){return true}if(a===null){return false}var b=new AreaOpXorOp().calculate(this.curves,a.curves);return b.isEmpty()};Area.prototype.transform=function(a){if(a===null){throw new NullPointerException("transform must not be null")}this.curves=Area.pathToCurves(this.getPathIterator(a));this.invalidateBounds()};Area.prototype.createTransformedArea=function(c){var b=new Area(this);b.transform(c);return b};Area.prototype.contains=function(a,f){if(!this.getCachedBounds().contains(a,f)){return false}var d=0;for(var b=0;b<this.curves.length;b++){var e=this.curves[b];d+=e.crossingsFor(a,f)}return((d&1)===1)};Area.prototype.contains=function(a,i,b,d){if(i===undefined){if(a instanceof Rectangle2D){var e=a;return this.contains(e.getX(),e.getY(),e.getWidth(),e.getHeight())}else{var f=a;return this.contains(f.getX(),f.getY())}}else{if(b<0||d<0){return false}if(!this.getCachedBounds().contains(a,i,b,d)){return false}var g=Crossings.findCrossings(this.curves,a,i,a+b,i+d);return(g!==null&&g.covers(i,i+d))}};Area.prototype.intersects=function(a,g,b,d){if(g===undefined){var e=a;return this.intersects(e.getX(),e.getY(),e.getWidth(),e.getHeight())}else{if(b<0||d<0){return false}if(!this.getCachedBounds().intersects(a,g,b,d)){return false}var f=Crossings.findCrossings(this.curves,a,g,a+b,g+d);return(f===null||!f.isEmpty())}};Area.prototype.getPathIterator=function(a,b){if(b===undefined){return new AreaIterator(this.curves,a)}else{return new FlatteningPathIterator(this.getPathIterator(a),b)}};function AreaIterator(b,a){this.curves=b;this.transform=a;this.index=0;this.prevcurve=null;if(b.length>=1){this.thiscurve=b[0]}else{this.thiscurve=null}}AreaIterator.prototype=Object.create(PathIterator.prototype);AreaIterator.prototype.constructor=AreaIterator;AreaIterator.prototype.getWindingRule=function(){return PathIterator.WIND_NON_ZERO};AreaIterator.prototype.isDone=function(){return(this.prevcurve===null&&this.thiscurve===null)};AreaIterator.prototype.next=function(){if(this.prevcurve!==null){this.prevcurve=null}else{this.prevcurve=this.thiscurve;this.index++;if(this.index<this.curves.length){this.thiscurve=this.curves[this.index];if(this.thiscurve.getOrder()!==0&&this.prevcurve.getX1()===this.thiscurve.getX0()&&this.prevcurve.getY1()===this.thiscurve.getY0()){this.prevcurve=null}}else{this.thiscurve=null}}};AreaIterator.prototype.currentSegment=function(c){var a;var b;if(this.prevcurve!==null){if(this.thiscurve===null||this.thiscurve.getOrder()===0){return PathIterator.SEG_CLOSE}c[0]=this.thiscurve.getX0();c[1]=this.thiscurve.getY0();a=PathIterator.SEG_LINETO;b=1}else{if(this.thiscurve===null){throw new NoSuchElementException("area iterator out of bounds")}else{a=this.thiscurve.getSegment(c);b=this.thiscurve.getOrder();if(b===0){b=1}}}if(this.transform!==null){this.transform.transform(c,0,c,0,b)}return a};function Curve(a){this.direction=a}Curve.INCREASING=1;Curve.DECREASING=-1;Curve.RECT_INTERSECTS=2147483648;Curve.TMIN=0.001;Curve.prototype.getDirection=function(){return this.direction};Curve.prototype.getWithDirection=function(a){return(this.direction===a?this:this.getReversedCurve())};Curve.insertMove=function(b,a,c){b.push(new Order0(a,c))};Curve.insertLine=function(e,b,d,a,c){if(d<c){e.push(new Order1(b,d,a,c,Curve.INCREASING))}else{if(d>c){e.push(new Order1(a,c,b,d,Curve.DECREASING))}}};Curve.insertQuad=function(e,a,c,d){var b=d[3];if(c>b){Order2.insert(e,d,d[2],b,d[0],d[1],a,c,Curve.DECREASING)}else{if(c===b&&c===d[1]){return}else{Order2.insert(e,d,a,c,d[0],d[1],d[2],b,Curve.INCREASING)}}};Curve.insertCubic=function(e,a,c,d){var b=d[5];if(c>b){Order3.insert(e,d,d[4],b,d[2],d[3],d[0],d[1],a,c,Curve.DECREASING)}else{if(c===b&&c===d[1]&&c===d[3]){return}else{Order3.insert(e,d,a,c,d[0],d[1],d[2],d[3],d[4],b,Curve.INCREASING)}}};Curve.pointCrossingsForPath=function(c,l,k){if(c.isDone()){return 0}var j=new Array(6);if(c.currentSegment(j)!==PathIterator.SEG_MOVETO){throw new IllegalPathStateException("missing initial moveto in path definition")}c.next();var b=j[0];var a=j[1];var i=b;var g=a;var f,e;var d=0;while(!c.isDone()){switch(c.currentSegment(j)){case PathIterator.SEG_MOVETO:if(g!==a){d+=Curve.pointCrossingsForLine(l,k,i,g,b,a)}b=i=j[0];a=g=j[1];break;case PathIterator.SEG_LINETO:f=j[0];e=j[1];d+=Curve.pointCrossingsForLine(l,k,i,g,f,e);i=f;g=e;break;case PathIterator.SEG_QUADTO:f=j[2];e=j[3];d+=Curve.pointCrossingsForQuad(l,k,i,g,j[0],j[1],f,e,0);i=f;g=e;break;case PathIterator.SEG_CUBICTO:f=j[4];e=j[5];d+=Curve.pointCrossingsForCubic(l,k,i,g,j[0],j[1],j[2],j[3],f,e,0);i=f;g=e;break;case PathIterator.SEG_CLOSE:if(g!==a){d+=Curve.pointCrossingsForLine(l,k,i,g,b,a)}i=b;g=a;break}c.next()}if(g!==a){d+=Curve.pointCrossingsForLine(l,k,i,g,b,a)}return d};Curve.pointCrossingsForLine=function(d,b,c,f,a,e){if(b<f&&b<e){return 0}if(b>=f&&b>=e){return 0}if(d>=c&&d>=a){return 0}if(d<c&&d<a){return(f<e)?1:-1}var g=c+(b-f)*(a-c)/(e-f);if(d>=g){return 0}return(f<e)?1:-1};Curve.pointCrossingsForQuad=function(m,k,d,l,n,g,c,j,b){if(k<l&&k<g&&k<j){return 0}if(k>=l&&k>=g&&k>=j){return 0}if(m>=d&&m>=n&&m>=c){return 0}if(m<d&&m<n&&m<c){if(k>=l){if(k<j){return 1}}else{if(k>=j){return -1}}return 0}if(b>52){return Curve.pointCrossingsForLine(m,k,d,l,c,j)}var a=(d+n)/2;var e=(l+g)/2;var f=(n+c)/2;var i=(g+j)/2;n=(a+f)/2;g=(e+i)/2;if(isNaN(n)||isNaN(g)){return 0}return(Curve.pointCrossingsForQuad(m,k,d,l,a,e,n,g,b+1)+Curve.pointCrossingsForQuad(m,k,n,g,f,i,c,j,b+1))};Curve.pointCrossingsForCubic=function(r,o,c,q,j,n,g,k,b,m,a){if(o<q&&o<n&&o<k&&o<m){return 0}if(o>=q&&o>=n&&o>=k&&o>=m){return 0}if(r>=c&&r>=j&&r>=g&&r>=b){return 0}if(r<c&&r<j&&r<g&&r<b){if(o>=q){if(o<m){return 1}}else{if(o>=m){return -1}}return 0}if(a>52){return pointCrossingsForLine(r,o,c,q,b,m)}var f=(j+g)/2;var d=(n+k)/2;j=(c+j)/2;n=(q+n)/2;g=(g+b)/2;k=(k+m)/2;var l=(j+f)/2;var e=(n+d)/2;var p=(f+g)/2;var i=(d+k)/2;f=(l+p)/2;d=(e+i)/2;if(isNaN(f)||isNaN(d)){return 0}return(Curve.pointCrossingsForCubic(r,o,c,q,j,n,l,e,f,d,a+1)+Curve.pointCrossingsForCubic(r,o,f,d,p,i,g,k,b,m,a+1))};Curve.rectCrossingsForPath=function(e,a,n,i,b){if(i<=a||b<=n){return 0}if(e.isDone()){return 0}var m=new Array(6);if(e.currentSegment(m)!==PathIterator.SEG_MOVETO){throw new IllegalPathStateException("missing initial moveto in path definition")}e.next();var l,k,d,c,j,g;l=d=m[0];k=c=m[1];var f=0;while(f!==Curve.RECT_INTERSECTS&&!e.isDone()){switch(e.currentSegment(m)){case PathIterator.SEG_MOVETO:if(l!==d||k!==c){f=Curve.rectCrossingsForLine(f,a,n,i,b,l,k,d,c)}d=l=m[0];c=k=m[1];break;case PathIterator.SEG_LINETO:j=m[0];g=m[1];f=Curve.rectCrossingsForLine(f,a,n,i,b,l,k,j,g);l=j;k=g;break;case PathIterator.SEG_QUADTO:j=m[2];g=m[3];f=Curve.rectCrossingsForQuad(f,a,n,i,b,l,k,m[0],m[1],j,g,0);l=j;k=g;break;case PathIterator.SEG_CUBICTO:j=m[4];g=m[5];f=Curve.rectCrossingsForCubic(f,a,n,i,b,l,k,m[0],m[1],m[2],m[3],j,g,0);l=j;k=g;break;case PathIterator.SEG_CLOSE:if(l!==d||k!==c){f=Curve.rectCrossingsForLine(f,a,n,i,b,l,k,d,c)}l=d;k=c;break}e.next()}if(f!==Curve.RECT_INTERSECTS&&(l!==d||k!==c)){f=Curve.rectCrossingsForLine(f,a,n,i,b,l,k,d,c)}return f};Curve.rectCrossingsForLine=function(g,b,l,i,d,c,k,a,j){if(k>=d&&j>=d){return g}if(k<=l&&j<=l){return g}if(c<=b&&a<=b){return g}if(c>=i&&a>=i){if(k<j){if(k<=l){g++}if(j>=d){g++}}else{if(j<k){if(j<=l){g--}if(k>=d){g--}}}return g}if((c>b&&c<i&&k>l&&k<d)||(a>b&&a<i&&j>l&&j<d)){return Curve.RECT_INTERSECTS}var f=c;if(k<l){f+=((l-k)*(a-c)/(j-k))}else{if(k>d){f+=((d-k)*(a-c)/(j-k))}}var e=a;if(j<l){e+=((l-j)*(c-a)/(k-j))}else{if(j>d){e+=((d-j)*(c-a)/(k-j))}}if(f<=b&&e<=b){return g}if(f>=i&&e>=i){if(k<j){if(k<=l){g++}if(j>=d){g++}}else{if(j<k){if(j<=l){g--}if(k>=d){g--}}}return g}return Curve.RECT_INTERSECTS};Curve.rectCrossingsForQuad=function(j,d,p,k,f,e,o,q,l,c,n,b){if(o>=f&&l>=f&&n>=f){return j}if(o<=p&&l<=p&&n<=p){return j}if(e<=d&&q<=d&&c<=d){return j}if(e>=k&&q>=k&&c>=k){if(o<n){if(o<=p&&n>p){j++}if(o<f&&n>=f){j++}}else{if(n<o){if(n<=p&&o>p){j--}if(n<f&&o>=f){j--}}}return j}if((e<k&&e>d&&o<f&&o>p)||(c<k&&c>d&&n<f&&n>p)){return Curve.RECT_INTERSECTS}if(b>52){return Curve.rectCrossingsForLine(j,d,p,k,f,e,o,c,n)}var a=(e+q)/2;var g=(o+l)/2;var i=(q+c)/2;var m=(l+n)/2;q=(a+i)/2;l=(g+m)/2;if(Double.isNaN(q)||Double.isNaN(l)){return 0}j=Curve.rectCrossingsForQuad(j,d,p,k,f,e,o,a,g,q,l,b+1);if(j!==Curve.RECT_INTERSECTS){j=Curve.rectCrossingsForQuad(j,d,p,k,f,q,l,i,m,c,n,b+1)}return j};Curve.rectCrossingsForCubic=function(i,r,c,u,e,q,g,d,k,a,j,o,f,b){if(g>=e&&k>=e&&j>=e&&f>=e){return i}if(g<=c&&k<=c&&j<=c&&f<=c){return i}if(q<=r&&d<=r&&a<=r&&o<=r){return i}if(q>=u&&d>=u&&a>=u&&o>=u){if(g<f){if(g<=c&&f>c){i++}if(g<e&&f>=e){i++}}else{if(f<g){if(f<=c&&g>c){i--}if(f<e&&g>=e){i--}}}return i}if((q>r&&q<u&&g>c&&g<e)||(o>r&&o<u&&f>c&&f<e)){return Curve.RECT_INTERSECTS}if(b>52){return Curve.rectCrossingsForLine(i,r,c,u,e,q,g,o,f)}var m=(d+a)/2;var s=(k+j)/2;d=(q+d)/2;k=(g+k)/2;a=(a+o)/2;j=(j+f)/2;var l=(d+m)/2;var n=(k+s)/2;var p=(m+a)/2;var t=(s+j)/2;m=(l+p)/2;s=(n+t)/2;if(Double.isNaN(m)||Double.isNaN(s)){return 0}i=Curve.rectCrossingsForCubic(i,r,c,u,e,q,g,d,k,l,n,m,s,b+1);if(i!==Curve.RECT_INTERSECTS){i=Curve.rectCrossingsForCubic(i,r,c,u,e,m,s,p,t,a,j,o,f,b+1)}return i};Curve.round=function(a){return a};Curve.orderof=function(b,a){if(b<a){return -1}if(b>a){return 1}return 0};Curve.prototype.crossingsFor=function(a,b){if(b>=this.getYTop()&&b<this.getYBot()){if(a<this.getXMax()&&(a<this.getXMin()||a<this.XforY(b))){return 1}}return 0};Curve.prototype.accumulateCrossings=function(i){var e=i.getXHi();if(this.getXMin()>=e){return false}var j=i.getXLo();var p=i.getYLo();var g=i.getYHi();var o=this.getYTop();var n=this.getYBot();var k,d,a,m;if(o<p){if(n<=p){return false}d=p;k=this.TforY(p)}else{if(o>=g){return false}d=o;k=0}if(n>g){m=g;a=this.TforY(g)}else{m=n;a=1}var f=false;var b=false;while(true){var l=this.XforT(k);if(l<e){if(b||l>j){return true}f=true}else{if(f){return true}b=true}if(k>=a){break}k=this.nextVertical(k,a)}if(f){i.record(d,m,direction)}return false};Curve.prototype.compareTo=function(l,p){var f=p[0];var e=p[1];e=Math.min(Math.min(e,this.getYBot()),l.getYBot());if(e<=p[0]){throw new InternalError("backstepping from "+p[0]+" to "+e)}p[1]=e;if(this.getXMax()<=l.getXMin()){if(this.getXMin()===l.getXMax()){return 0}return -1}if(this.getXMin()>=l.getXMax()){return 1}var d=this.TforY(f);var b=this.YforT(d);if(b<f){d=this.refineTforY(d,b,f);b=this.YforT(d)}var c=this.TforY(e);if(this.YforT(c)<f){c=this.refineTforY(c,this.YforT(c),f)}var r=l.TforY(f);var n=l.YforT(r);if(n<f){r=l.refineTforY(r,n,f);n=l.YforT(r)}var q=l.TforY(e);if(l.YforT(q)<f){q=l.refineTforY(q,l.YforT(q),f)}var s=this.XforT(d);var A=l.XforT(r);var E=Math.max(Math.abs(f),Math.abs(e));var z=Math.max(E*1e-14,1e-300);if(this.fairlyClose(s,A)){var a=z;var m=Math.min(z*10000000000000,(e-f)*0.1);var o=f+a;while(o<=e){if(this.fairlyClose(this.XforY(o),l.XforY(o))){if((a*=2)>m){a=m}}else{o-=a;while(true){a/=2;var g=o+a;if(g<=o){break}if(this.fairlyClose(this.XforY(g),l.XforY(g))){o=g}}break}o+=a}if(o>f){if(o<e){p[1]=o}return 0}}while(d<c&&r<q){var D=this.nextVertical(d,c);var k=this.XforT(D);var B=this.YforT(D);var j=l.nextVertical(r,q);var v=l.XforT(j);var i=l.YforT(j);try{if(this.findIntersect(l,p,z,0,0,d,s,b,D,k,B,r,A,n,j,v,i)){break}}catch(u){return 0}if(B<i){if(B>p[0]){if(B<p[1]){p[1]=B}break}d=D;s=k;b=B}else{if(i>p[0]){if(i<p[1]){p[1]=i}break}r=j;A=v;n=i}}var C=(p[0]+p[1])/2;return Curve.orderof(this.XforY(C),l.XforY(C))};Curve.prototype.findIntersect=function(k,r,F,f,j,e,B,c,d,z,a,v,K,o,u,J,m){if(c>m||o>a){return false}if(Math.min(B,z)>Math.max(K,J)||Math.max(B,z)<Math.min(K,J)){return false}if(d-e>Curve.TMIN){var D=(e+d)/2;var n=this.XforT(D);var G=this.YforT(D);if(D===e||D===d){throw new InternalError("no s progress!")}if(u-v>Curve.TMIN){var C=(v+u)/2;var l=k.XforT(C);var E=k.YforT(C);if(C===v||C===u){throw new InternalError("no t progress!")}if(G>=o&&E>=c){if(this.findIntersect(k,r,F,f+1,j+1,e,B,c,D,n,G,v,K,o,C,l,E)){return true}}if(G>=E){if(this.findIntersect(k,r,F,f+1,j+1,e,B,c,D,n,G,C,l,E,u,J,m)){return true}}if(E>=G){if(this.findIntersect(k,r,F,f+1,j+1,D,n,G,d,z,a,v,K,o,C,l,E)){return true}}if(a>=E&&m>=G){if(this.findIntersect(k,r,F,f+1,j+1,D,n,G,d,z,a,C,l,E,u,J,m)){return true}}}else{if(G>=o){if(this.findIntersect(k,r,F,f+1,j,e,B,c,D,n,G,v,K,o,u,J,m)){return true}}if(m>=G){if(this.findIntersect(k,r,F,f+1,j,D,n,G,d,z,a,v,K,o,u,J,m)){return true}}}}else{if(u-v>Curve.TMIN){var C=(v+u)/2;var l=k.XforT(C);var E=k.YforT(C);if(C===v||C===u){throw new InternalError("no t progress!")}if(E>=c){if(this.findIntersect(k,r,F,f,j+1,e,B,c,d,z,a,v,K,o,C,l,E)){return true}}if(a>=E){if(this.findIntersect(k,r,F,f,j+1,e,B,c,d,z,a,C,l,E,u,J,m)){return true}}}else{var L=z-B;var q=a-c;var A=J-K;var b=m-o;var g=K-B;var H=o-c;var i=A*q-b*L;if(i!==0){var I=1/i;var D=(A*H-b*g)*I;var C=(L*H-q*g)*I;if(D>=0&&D<=1&&C>=0&&C<=1){D=e+D*(d-e);C=v+C*(u-v);var p=(this.YforT(D)+k.YforT(C))/2;if(p<=r[1]&&p>r[0]){r[1]=p;return true}}}}}return false};Curve.prototype.refineTforY=function(e,d,c){var b=1;while(true){var a=(e+b)/2;if(a===e||a===b){return b}var f=this.YforT(a);if(f<c){e=a;d=f}else{if(f>c){b=a}else{return b}}}};Curve.prototype.fairlyClose=function(b,a){return(Math.abs(b-a)<Math.max(Math.abs(b),Math.abs(a))*1e-10)};function Order0(a,b){Curve.call(this,Curve.INCREASING);this.x=a;this.y=b}Order0.prototype=Object.create(Curve.prototype);Order0.prototype.constructor=Order0;Order0.prototype.getOrder=function(){return 0};Order0.prototype.getXTop=function(){return this.x};Order0.prototype.getYTop=function(){return this.y};Order0.prototype.getXBot=function(){return this.x};Order0.prototype.getYBot=function(){return this.y};Order0.prototype.getXMin=function(){return this.x};Order0.prototype.getXMax=function(){return this.x};Order0.prototype.getX0=function(){return this.x};Order0.prototype.getY0=function(){return this.y};Order0.prototype.getX1=function(){return this.x};Order0.prototype.getY1=function(){return this.y};Order0.prototype.XforY=function(a){return this.y};Order0.prototype.TforY=function(a){return 0};Order0.prototype.XforT=function(a){return this.x};Order0.prototype.YforT=function(a){return this.y};Order0.prototype.dXforT=function(a,b){return 0};Order0.prototype.dYforT=function(a,b){return 0};Order0.prototype.nextVertical=function(b,a){return a};Order0.prototype.crossingsFor=function(a,b){return 0};Order0.prototype.accumulateCrossings=function(a){return(this.x>a.getXLo()&&this.x<a.getXHi()&&this.y>a.getYLo()&&this.y<a.getYHi())};Order0.prototype.enlarge=function(a){a.add(this.x,this.y)};Order0.prototype.getSubCurve=function(b,a,c){return this};Order0.prototype.getReversedCurve=function(){return this};Order0.prototype.getSegment=function(a){a[0]=this.x;a[1]=this.y;return PathIterator.SEG_MOVETO};function Order1(b,d,a,c,e){Curve.call(this,e);this.x0=b;this.y0=d;this.x1=a;this.y1=c;if(b<a){this.xmin=b;this.xmax=a}else{this.xmin=a;this.xmax=b}}Order1.prototype=Object.create(Curve.prototype);Order1.prototype.constructor=Order1;Order1.prototype.getOrder=function(){return 1};Order1.prototype.getXTop=function(){return this.x0};Order1.prototype.getYTop=function(){return this.y0};Order1.prototype.getXBot=function(){return this.x1};Order1.prototype.getYBot=function(){return this.y1};Order1.prototype.getXMin=function(){return this.xmin};Order1.prototype.getXMax=function(){return this.xmax};Order1.prototype.getX0=function(){return(this.direction===Curve.INCREASING)?this.x0:this.x1};Order1.prototype.getY0=function(){return(this.direction===Curve.INCREASING)?this.y0:this.y1};Order1.prototype.getX1=function(){return(this.direction===Curve.DECREASING)?this.x0:this.x1};Order1.prototype.getY1=function(){return(this.direction===Curve.DECREASING)?this.y0:this.y1};Order1.prototype.XforY=function(a){if(this.x0===this.x1||a<=this.y0){return this.x0}if(a>=this.y1){return this.x1}return(this.x0+(a-this.y0)*(this.x1-this.x0)/(this.y1-this.y0))};Order1.prototype.TforY=function(a){if(a<=this.y0){return 0}if(a>=this.y1){return 1}return(a-this.y0)/(this.y1-this.y0)};Order1.prototype.XforT=function(a){return this.x0+a*(this.x1-this.x0)};Order1.prototype.YforT=function(a){return this.y0+a*(this.y1-this.y0)};Order1.prototype.dXforT=function(a,b){switch(b){case 0:return this.x0+a*(this.x1-this.x0);case 1:return(this.x1-this.x0);default:return 0}};Order1.prototype.dYforT=function(a,b){switch(b){case 0:return this.y0+a*(this.y1-this.y0);case 1:return(this.y1-this.y0);default:return 0}};Order1.prototype.nextVertical=function(b,a){return a};Order1.prototype.accumulateCrossings=function(f){var g=f.getXLo();var j=f.getYLo();var d=f.getXHi();var e=f.getYHi();if(this.xmin>=d){return false}var k,b,a,i;if(this.y0<j){if(this.y1<=j){return false}b=j;k=this.XforY(j)}else{if(this.y0>=e){return false}b=this.y0;k=this.x0}if(this.y1>e){i=e;a=this.XforY(e)}else{i=this.y1;a=this.x1}if(k>=d&&a>=d){return false}if(k>g||a>g){return true}f.record(b,i,this.direction);return false};Order1.prototype.enlarge=function(a){a.add(this.x0,this.y0);a.add(this.x1,this.y1)};Order1.prototype.getSubCurve=function(b,a,f){if(f===undefined){f=this.direction}if(b===this.y0&&a===this.y1){return this.getWithDirection(f)}if(this.x0===this.x1){return new Order1(this.x0,b,this.x1,a,f)}var e=this.x0-this.x1;var d=this.y0-this.y1;var c=(this.x0+(b-this.y0)*e/d);var g=(this.x0+(a-this.y0)*e/d);return new Order1(c,b,g,a,f)};Order1.prototype.getReversedCurve=function(){return new Order1(this.x0,this.y0,this.x1,this.y1,-this.direction)};Order1.prototype.compareTo=function(g,f){if(!(g instanceof Order1)){return Curve.prototype.compareTo.call(this,g,f)}var c=g;if(f[1]<=f[0]){throw new InternalError("yrange already screwed up...")}f[1]=Math.min(Math.min(f[1],this.y1),c.y1);if(f[1]<=f[0]){throw new InternalError("backstepping from "+f[0]+" to "+f[1])}if(this.xmax<=c.xmin){return(this.xmin===c.xmax)?0:-1}if(this.xmin>=c.xmax){return 1}var k=this.x1-this.x0;var b=this.y1-this.y0;var j=c.x1-c.x0;var a=c.y1-c.y0;var e=j*b-k*a;var i;if(e!==0){var d=((this.x0-c.x0)*b*a-this.y0*k*a+c.y0*j*b);i=d/e;if(i<=f[0]){i=Math.min(this.y1,c.y1)}else{if(i<f[1]){f[1]=i}i=Math.max(this.y0,c.y0)}}else{i=Math.max(this.y0,c.y0)}return Curve.orderof(this.XforY(i),c.XforY(i))};Order1.prototype.getSegment=function(a){if(this.direction===Curve.INCREASING){a[0]=this.x1;a[1]=this.y1}else{a[0]=this.x0;a[1]=this.y0}return PathIterator.SEG_LINETO};function Order2(c,f,b,e,a,d,g){Curve.call(this,g);if(e<f){e=f}else{if(e>d){e=d}}this.x0=c;this.y0=f;this.cx0=b;this.cy0=e;this.x1=a;this.y1=d;this.xmin=Math.min(Math.min(c,a),b);this.xmax=Math.max(Math.max(c,a),b);this.xcoeff0=c;this.xcoeff1=b+b-c-c;this.xcoeff2=c-b-b+a;this.ycoeff0=f;this.ycoeff1=e+e-f-f;this.ycoeff2=f-e-e+d}Order2.prototype=Object.create(Curve.prototype);Order2.prototype.constructor=Order1;Order2.prototype.getOrder=function(){return 2};Order2.prototype.getXTop=function(){return this.x0};Order2.prototype.getYTop=function(){return this.y0};Order2.prototype.getXBot=function(){return this.x1};Order2.prototype.getYBot=function(){return this.y1};Order2.prototype.getXMin=function(){return this.xmin};Order2.prototype.getXMax=function(){return this.xmax};Order2.prototype.getX0=function(){return(this.direction===Curve.INCREASING)?this.x0:this.x1};Order2.prototype.getY0=function(){return(this.direction===Curve.INCREASING)?this.y0:this.y1};Order2.prototype.getCX0=function(){return this.cx0};Order2.prototype.getCY0=function(){return this.cy0};Order2.prototype.getX1=function(){return(this.direction===Curve.DECREASING)?this.x0:this.x1};Order2.prototype.getY1=function(){return(this.direction===Curve.DECREASING)?this.y0:this.y1};Order2.prototype.XforY=function(a){if(a<=this.y0){return this.x0}if(a>=this.y1){return this.x1}return this.XforT(this.TforY(a))};Order2.prototype.TforY=function(a){if(a<=this.y0){return 0}if(a>=this.y1){return 1}return Order2.TforY(a,this.ycoeff0,this.ycoeff1,this.ycoeff2)};Order2.insert=function(n,f,b,k,g,d,a,j,i){var m=Order2.getHorizontalParams(k,d,j,f);if(m===0){Order2.addInstance(n,b,k,g,d,a,j,i);return}var l=f[0];f[0]=b;f[1]=k;f[2]=g;f[3]=d;f[4]=a;f[5]=j;Order2.split(f,0,l);var e=(i===Curve.INCREASING)?0:4;var c=4-e;Order2.addInstance(n,f[e],f[e+1],f[e+2],f[e+3],f[e+4],f[e+5],i);Order2.addInstance(n,f[c],f[c+1],f[c+2],f[c+3],f[c+4],f[c+5],i)};Order2.addInstance=function(i,c,f,b,e,a,d,g){if(f>d){i.push(new Order2(a,d,b,e,c,f,-g))}else{if(d>f){i.push(new Order2(c,f,b,e,a,d,g))}}};Order2.getHorizontalParams=function(e,f,d,b){if(e<=f&&f<=d){return 0}e-=f;d-=f;var a=e+d;if(a===0){return 0}var c=e/a;if(c<=0||c>=1){return 0}b[0]=c;return 1};Order2.split=function(g,e,j){var b,i,d,c,a,f;g[e+8]=a=g[e+4];g[e+9]=f=g[e+5];d=g[e+2];c=g[e+3];a=d+(a-d)*j;f=c+(f-c)*j;b=g[e+0];i=g[e+1];b=b+(d-b)*j;i=i+(c-i)*j;d=b+(a-b)*j;c=i+(f-i)*j;g[e+2]=b;g[e+3]=i;g[e+4]=d;g[e+5]=c;g[e+6]=a;g[e+7]=f};Order2.TforY=function(g,f,c,b){f-=g;if(b===0){var i=-f/c;if(i>=0&&i<=1){return i}}else{var e=c*c-4*b*f;if(e>=0){e=Math.sqrt(e);if(c<0){e=-e}var a=(c+e)/-2;var i=a/b;if(i>=0&&i<=1){return i}if(a!==0){i=f/a;if(i>=0&&i<=1){return i}}}}var k=f;var j=f+c+b;return(0<(k+j)/2)?0:1};Order2.prototype.XforT=function(a){return(this.xcoeff2*a+this.xcoeff1)*a+this.xcoeff0};Order2.prototype.YforT=function(a){return(this.ycoeff2*a+this.ycoeff1)*a+this.ycoeff0};Order2.prototype.dXforT=function(a,b){switch(b){case 0:return(this.xcoeff2*a+this.xcoeff1)*a+this.xcoeff0;case 1:return 2*this.xcoeff2*a+this.xcoeff1;case 2:return 2*this.xcoeff2;default:return 0}};Order2.prototype.dYforT=function(a,b){switch(b){case 0:return(this.ycoeff2*a+this.ycoeff1)*a+this.ycoeff0;case 1:return 2*this.ycoeff2*a+this.ycoeff1;case 2:return 2*this.ycoeff2;default:return 0}};Order2.prototype.nextVertical=function(c,b){var a=-this.xcoeff1/(2*this.xcoeff2);if(a>c&&a<b){return a}return b};Order2.prototype.enlarge=function(b){b.add(this.x0,this.y0);var a=-this.xcoeff1/(2*this.xcoeff2);if(a>0&&a<1){b.add(this.XforT(a),this.YforT(a))}b.add(this.x1,this.y1)};Order2.prototype.getSubCurve=function(b,a,c){if(c===undefined){c=this.direction}var f,e;if(b<=this.y0){if(a>=this.y1){return this.getWithDirection(c)}f=0}else{f=Order2.TforY(b,this.ycoeff0,this.ycoeff1,this.ycoeff2)}if(a>=y1){e=1}else{e=Order2.TforY(a,this.ycoeff0,this.ycoeff1,this.ycoeff2)}var g=new Array(10);g[0]=this.x0;g[1]=this.y0;g[2]=this.cx0;g[3]=this.cy0;g[4]=this.x1;g[5]=this.y1;if(e<1){Order2.split(g,0,e)}var d;if(f<=0){d=0}else{Order2.split(g,0,f/e);d=4}return new Order2(g[d+0],b,g[d+2],g[d+3],g[d+4],a,c)};Order2.prototype.getReversedCurve=function(){return new Order2(this.x0,this.y0,this.cx0,this.cy0,this.x1,this.y1,-this.direction)};Order2.prototype.getSegment=function(a){a[0]=this.cx0;a[1]=this.cy0;if(this.direction===Curve.INCREASING){a[2]=this.x1;a[3]=this.y1}else{a[2]=this.x0;a[3]=this.y0}return PathIterator.SEG_QUADTO};function Order3(b,j,f,d,e,c,a,i,g){Curve.call(this,g);if(d<j){this.cy0=j}if(c>i){this.cy1=i}this.x0=b;this.y0=j;this.cx0=f;this.cy0=d;this.cx1=e;this.cy1=c;this.x1=a;this.y1=i;this.xmin=Math.min(Math.min(b,a),Math.min(f,e));this.xmax=Math.max(Math.max(b,a),Math.max(f,e));this.xcoeff0=b;this.xcoeff1=(f-b)*3;this.xcoeff2=(e-f-f+b)*3;this.xcoeff3=a-(e-f)*3-b;this.ycoeff0=j;this.ycoeff1=(d-j)*3;this.ycoeff2=(c-d-d+j)*3;this.ycoeff3=i-(c-d)*3-j;this.YforT1=this.YforT2=this.YforT3=j;this.TforY1=this.TforY2=this.TforY3=0}Order3.prototype=Object.create(Curve.prototype);Order3.prototype.constructor=Order3;Order3.prototype.getOrder=function(){return 3};Order3.prototype.getXTop=function(){return this.x0};Order3.prototype.getYTop=function(){return this.y0};Order3.prototype.getXBot=function(){return this.x1};Order3.prototype.getYBot=function(){return this.y1};Order3.prototype.getXMin=function(){return this.xmin};Order3.prototype.getXMax=function(){return this.xmax};Order3.prototype.getX0=function(){return(this.direction===Curve.INCREASING)?this.x0:this.x1};Order3.prototype.getY0=function(){return(this.direction===Curve.INCREASING)?this.y0:this.y1};Order3.prototype.getCX0=function(){return(this.direction===Curve.INCREASING)?this.cx0:this.cx1};Order3.prototype.getCY0=function(){return(this.direction===Curve.INCREASING)?this.cy0:this.cy1};Order3.prototype.getCX1=function(){return(this.direction===Curve.DECREASING)?this.cx0:this.cx1};Order3.prototype.getCY1=function(){return(this.direction===Curve.DECREASING)?this.cy0:this.cy1};Order3.prototype.getX1=function(){return(this.direction===Curve.DECREASING)?this.x0:this.x1};Order3.prototype.getY1=function(){return(this.direction===Curve.DECREASING)?this.y0:this.y1};Order3.insert=function(o,e,b,l,i,d,g,c,a,k,j){var n=Order3.getHorizontalParams(l,d,c,k,e);if(n===0){Order3.addInstance(o,b,l,i,d,g,c,a,k,j);return}e[3]=b;e[4]=l;e[5]=i;e[6]=d;e[7]=g;e[8]=c;e[9]=a;e[10]=k;var m=e[0];if(n>1&&m>e[1]){e[0]=e[1];e[1]=m;m=e[0]}Order3.split(e,3,m);if(n>1){m=(e[1]-m)/(1-m);Order3.split(e,9,m)}var f=3;if(j===Curve.DECREASING){f+=n*6}while(n>=0){Order3.addInstance(o,e[f+0],e[f+1],e[f+2],e[f+3],e[f+4],e[f+5],e[f+6],e[f+7],j);n--;if(j===Curve.INCREASING){f+=6}else{f-=6}}};Order3.addInstance=function(k,b,j,f,d,e,c,a,i,g){if(j>i){k.push(new Order3(a,i,e,c,f,d,b,j,-g))}else{if(i>j){k.push(new Order3(b,j,f,d,e,c,a,i,g))}}};Order3.getHorizontalParams=function(g,f,c,d,k){if(g<=f&&f<=c&&c<=d){return 0}d-=c;c-=f;f-=g;k[0]=f;k[1]=(c-f)*2;k[2]=(d-c-c+f);var a=QuadCurve2D.solveQuadratic(k,k);var b=0;for(var e=0;e<a;e++){var l=k[e];if(l>0&&l<1){if(b<e){k[b]=l}b++}}return b};Order3.split=function(j,g,l){var b,k,f,d,e,c,a,i;j[g+12]=a=j[g+6];j[g+13]=i=j[g+7];e=j[g+4];c=j[g+5];a=e+(a-e)*l;i=c+(i-c)*l;b=j[g+0];k=j[g+1];f=j[g+2];d=j[g+3];b=b+(f-b)*l;k=k+(d-k)*l;f=f+(e-f)*l;d=d+(c-d)*l;e=f+(a-f)*l;c=d+(i-d)*l;f=b+(f-b)*l;d=k+(d-k)*l;j[g+2]=b;j[g+3]=k;j[g+4]=f;j[g+5]=d;j[g+6]=f+(e-f)*l;j[g+7]=d+(c-d)*l;j[g+8]=e;j[g+9]=c;j[g+10]=a;j[g+11]=i};Order3.prototype.TforY=function(k){if(k<=this.y0){return 0}if(k>=this.y1){return 1}if(k===this.YforT1){return this.TforY1}if(k===this.YforT2){return this.TforY2}if(k===this.YforT3){return this.TforY3}if(this.ycoeff3===0){return Order2.TforY(k,this.ycoeff0,this.ycoeff1,this.ycoeff2)}var C=this.ycoeff2/this.ycoeff3;var z=this.ycoeff1/this.ycoeff3;var u=(this.ycoeff0-k)/this.ycoeff3;var i=0;var g=(C*C-3*z)/9;var f=(2*C*C*C-9*C*z+27*u)/54;var s=f*f;var n=g*g*g;var v=C/3;var o;if(s<n){var j=Math.acos(f/Math.sqrt(n));g=-2*Math.sqrt(g);o=this.refine(C,z,u,k,g*Math.cos(j/3)-v);if(o<0){o=this.refine(C,z,u,k,g*Math.cos((j+Math.PI*2)/3)-v)}if(o<0){o=this.refine(C,z,u,k,g*Math.cos((j-Math.PI*2)/3)-v)}}else{var d=(f<0);var e=Math.sqrt(s-n);if(d){f=-f}var q=Math.pow(f+e,1/3);if(!d){q=-q}var p=(q===0)?0:(g/q);o=this.refine(C,z,u,k,(q+p)-v)}if(o<0){var m=0;var l=1;while(true){o=(m+l)/2;if(o===m||o===l){break}var r=this.YforT(o);if(r<k){m=o}else{if(r>k){l=o}else{break}}}}if(o>=0){this.TforY3=this.TforY2;this.YforT3=this.YforT2;this.TforY2=this.TforY1;this.YforT2=this.YforT1;this.TforY1=o;this.YforT1=k}return o};Order3.prototype.refine=function(o,n,l,k,q){if(q<-0.1||q>1.1){return -1}var m=this.YforT(q);var i,f;if(m<k){i=q;f=1}else{i=0;f=q}var g=q;var d=m;var p=true;while(m!==k){if(!p){var e=(i+f)/2;if(e===i||e===f){break}q=e}else{var j=this.dYforT(q,1);if(j===0){p=false;continue}var e=q+((k-m)/j);if(e===q||e<=i||e>=f){p=false;continue}q=e}m=this.YforT(q);if(m<k){i=q}else{if(m>k){f=q}else{break}}}return(q>1)?-1:q};Order3.prototype.XforY=function(a){if(a<=this.y0){return this.x0}if(a>=this.y1){return this.x1}return this.XforT(this.TforY(a))};Order3.prototype.XforT=function(a){return(((this.xcoeff3*a)+this.xcoeff2)*a+this.xcoeff1)*a+this.xcoeff0};Order3.prototype.YforT=function(a){return(((this.ycoeff3*a)+this.ycoeff2)*a+this.ycoeff1)*a+this.ycoeff0};Order3.prototype.dXforT=function(a,b){switch(b){case 0:return(((this.xcoeff3*a)+this.xcoeff2)*a+this.xcoeff1)*a+this.xcoeff0;case 1:return((3*this.xcoeff3*a)+2*this.xcoeff2)*a+this.xcoeff1;case 2:return(6*this.xcoeff3*a)+2*this.xcoeff2;case 3:return 6*this.xcoeff3;default:return 0}};Order3.prototype.dYforT=function(a,b){switch(b){case 0:return(((this.ycoeff3*a)+this.ycoeff2)*a+this.ycoeff1)*a+this.ycoeff0;case 1:return((3*this.ycoeff3*a)+2*this.ycoeff2)*a+this.ycoeff1;case 2:return(6*this.ycoeff3*a)+2*this.ycoeff2;case 3:return 6*this.ycoeff3;default:return 0}};Order3.prototype.nextVertical=function(c,b){var e=[this.xcoeff1,2*this.xcoeff2,3*this.xcoeff3];var d=QuadCurve2D.solveQuadratic(e,e);for(var a=0;a<d;a++){if(e[a]>c&&e[a]<b){b=e[a]}}return b};Order3.prototype.enlarge=function(c){c.add(this.x0,this.y0);var e=[this.xcoeff1,2*this.xcoeff2,3*this.xcoeff3];var d=QuadCurve2D.solveQuadratic(e,e);for(var b=0;b<d;b++){var a=e[b];if(a>0&&a<1){c.add(this.XforT(a),this.YforT(a))}}c.add(this.x1,this.y1)};Order3.prototype.getSubCurve=function(b,a,c){if(c===undefined){c=this.direction}if(b<=this.y0&&a>=this.y1){return this.getWithDirection(c)}var j=new Array(14);var g,f;g=this.TforY(b);f=this.TforY(a);j[0]=this.x0;j[1]=this.y0;j[2]=this.cx0;j[3]=this.cy0;j[4]=this.cx1;j[5]=this.cy1;j[6]=this.x1;j[7]=this.y1;if(g>f){var e=g;g=f;f=e}if(f<1){Order3.split(j,0,f)}var d;if(g<=0){d=0}else{Order3.split(j,0,g/f);d=6}return new Order3(j[d+0],b,j[d+2],j[d+3],j[d+4],j[d+5],j[d+6],a,c)};Order3.prototype.getReversedCurve=function(){return new Order3(this.x0,this.y0,this.cx0,this.cy0,this.cx1,this.cy1,this.x1,this.y1,-this.direction)};Order3.prototype.getSegment=function(a){if(this.direction===Curve.INCREASING){a[0]=this.cx0;a[1]=this.cy0;a[2]=this.cx1;a[3]=this.cy1;a[4]=this.x1;a[5]=this.y1}else{a[0]=this.cx1;a[1]=this.cy1;a[2]=this.cx0;a[3]=this.cy0;a[4]=this.x0;a[5]=this.y0}return PathIterator.SEG_CUBICTO};function Crossings(d,b,c,a){this.xlo=d;this.ylo=b;this.xhi=c;this.yhi=a;this.limit=0;this.yranges=new Array(10)}Crossings.prototype.getXLo=function(){return this.xlo};Crossings.prototype.getYLo=function(){return this.ylo};Crossings.prototype.getXHi=function(){return this.xhi};Crossings.prototype.getYHi=function(){return this.yhi};Crossings.prototype.isEmpty=function(){return(this.limit===0)};Crossings.findCrossings=function(g,f,d,e,a){var k=new CrossingsEvenOdd(f,d,e,a);for(var b=0;b<g.length;b++){var j=g[b];if(j.accumulateCrossings(k)){return null}}return k};Crossings.findCrossings=function(d,k,o,a,e){var m;if(d.getWindingRule()===PathIterator.WIND_EVEN_ODD){m=new CrossingsEvenOdd(k,o,a,e)}else{m=new CrossingsNonZero(k,o,a,e)}var n=new Array(23);var c=0;var b=0;var l=0;var j=0;var g,f;while(!d.isDone()){var i=d.currentSegment(n);switch(i){case PathIterator.SEG_MOVETO:if(b!==j&&m.accumulateLine(l,j,c,b)){return null}c=l=n[0];b=j=n[1];break;case PathIterator.SEG_LINETO:g=n[0];f=n[1];if(m.accumulateLine(l,j,g,f)){return null}l=g;j=f;break;case PathIterator.SEG_QUADTO:g=n[2];f=n[3];if(m.accumulateQuad(l,j,n)){return null}l=g;j=f;break;case PathIterator.SEG_CUBICTO:g=n[4];f=n[5];if(m.accumulateCubic(l,j,n)){return null}l=g;j=f;break;case PathIterator.SEG_CLOSE:if(b!==j&&m.accumulateLine(l,j,c,b)){return null}l=c;j=b;break}d.next()}if(b!==j){if(m.accumulateLine(l,j,c,b)){return null}}return m};Crossings.prototype.accumulateLine=function(c,i,b,g,f){if(f===undefined){if(i<=g){return this.accumulateLine(c,i,b,g,1)}else{return this.accumulateLine(b,g,c,i,-1)}}else{if(this.yhi<=i||this.ylo>=g){return false}if(c>=this.xhi&&b>=this.xhi){return false}if(i===g){return(c>=this.xlo||b>=this.xlo)}var j,d,a,e;var l=(b-c);var k=(g-i);if(i<this.ylo){j=c+(this.ylo-i)*l/k;d=this.ylo}else{j=c;d=i}if(this.yhi<g){a=c+(this.yhi-i)*l/k;e=this.yhi}else{a=b;e=g}if(j>=this.xhi&&a>=this.xhi){return false}if(j>this.xlo||a>this.xlo){return true}this.record(d,e,f);return false}};Crossings.prototype.accumulateQuad=function(d,e,f){if(e<this.ylo&&f[1]<this.ylo&&f[3]<this.ylo){return false}if(e>this.yhi&&f[1]>this.yhi&&f[3]>this.yhi){return false}if(d>this.xhi&&f[0]>this.xhi&&f[2]>this.xhi){return false}if(d<this.xlo&&f[0]<this.xlo&&f[2]<this.xlo){if(e<f[3]){this.record(Math.max(e,this.ylo),Math.min(f[3],this.yhi),1)}else{if(e>f[3]){this.record(Math.max(f[3],this.ylo),Math.min(e,this.yhi),-1)}}return false}var b=[];Curve.insertQuad(b,d,e,f);for(var a=0;a<b.length;a++){var g=b[a];if(g.accumulateCrossings(this)){return true}}return false};Crossings.prototype.accumulateCubic=function(d,e,f){if(e<this.ylo&&f[1]<this.ylo&&f[3]<this.ylo&&f[5]<this.ylo){return false}if(e>this.yhi&&f[1]>this.yhi&&f[3]>this.yhi&&f[5]>this.yhi){return false}if(d>this.xhi&&f[0]>this.xhi&&f[2]>this.xhi&&f[4]>this.xhi){return false}if(d<this.xlo&&f[0]<this.xlo&&f[2]<this.xlo&&f[4]<this.xlo){if(e<=f[5]){this.record(Math.max(e,this.ylo),Math.min(f[5],this.yhi),1)}else{this.record(Math.max(f[5],this.ylo),Math.min(e,this.yhi),-1)}return false}var b=[];Curve.insertCubic(this.tmp,d,e,f);for(var a=0;a<b.length;a++){var g=b[a];if(g.accumulateCrossings(this)){return true}}return false};function CrossingsEvenOdd(d,b,c,a){Crossings.call(this,d,b,c,a)}CrossingsEvenOdd.prototype=Object.create(Crossings.prototype);CrossingsEvenOdd.prototype.constructor=CrossingsEvenOdd;CrossingsEvenOdd.prototype.covers=function(b,a){return(this.limit===2&&this.yranges[0]<=b&&this.yranges[1]>=a)};CrossingsEvenOdd.prototype.record=function(d,j,i){if(d>=j){return}var k=0;while(k<this.limit&&d>this.yranges[k+1]){k+=2}var l=k;while(k<this.limit){var m=this.yranges[k++];var f=this.yranges[k++];if(j<m){this.yranges[l++]=d;this.yranges[l++]=j;d=m;j=f;continue}var a,c,e,g;if(d<m){a=d;c=m}else{a=m;c=d}if(j<f){e=j;g=f}else{e=f;g=j}if(c===e){d=a;j=g}else{if(c>e){d=e;e=c;c=d}if(a!==c){this.yranges[l++]=a;this.yranges[l++]=c}d=e;j=g}if(d>=j){break}}if(l<k&&k<this.limit){System.arraycopy(this.yranges,k,this.yranges,l,this.limit-k)}l+=(this.limit-k);if(d<j){if(l>=this.yranges.length){var b=new Array(l+10);System.arraycopy(this.yranges,0,b,0,l);this.yranges=b}this.yranges[l++]=d;this.yranges[l++]=j}this.limit=l};function CrossingsNonZero(d,b,c,a){Crossings.call(this.xlo,b,c,a);this.crosscounts=new Array(this.yranges.length/2)}CrossingsNonZero.prototype=Object.create(Crossings.prototype);CrossingsNonZero.prototype.constructor=CrossingsNonZero;CrossingsNonZero.prototype.covers=function(b,a){var d=0;while(d<this.limit){var e=this.yranges[d++];var c=this.yranges[d++];if(b>=c){continue}if(b<e){return false}if(a<=c){return true}b=c}return(b>=a)};CrossingsNonZero.prototype.remove=function(a){this.limit-=2;var b=this.limit-a;if(b>0){System.arraycopy(this.yranges,a+2,this.yranges,a,b);System.arraycopy(crosscounts,a/2+1,crosscounts,a/2,b/2)}};CrossingsNonZero.prototype.insert=function(f,e,c,b){var g=this.limit-f;var a=this.yranges;var d=crosscounts;if(this.limit>=this.yranges.length){this.yranges=new Array(this.limit+10);System.arraycopy(a,0,this.yranges,0,f);crosscounts=new Array((this.limit+10)/2);System.arraycopy(d,0,crosscounts,0,f/2)}if(g>0){System.arraycopy(a,f,this.yranges,f+2,g);System.arraycopy(d,f/2,crosscounts,f/2+1,g/2)}this.yranges[f+0]=e;this.yranges[f+1]=c;crosscounts[f/2]=b;this.limit+=2};CrossingsNonZero.prototype.record=function(b,g,f){if(b>=g){return}var j=0;while(j<this.limit&&b>this.yranges[j+1]){j+=2}if(j<this.limit){var e=crosscounts[j/2];var i=this.yranges[j+0];var d=this.yranges[j+1];if(d===b&&e===f){if(j+2===this.limit){this.yranges[j+1]=g;return}this.remove(j);b=i;e=crosscounts[j/2];i=this.yranges[j+0];d=this.yranges[j+1]}if(g<i){this.insert(j,b,g,f);return}if(g===i&&e===f){this.yranges[j]=b;return}if(b<i){this.insert(j,b,i,f);j+=2;b=i}else{if(i<b){this.insert(j,i,b,e);j+=2;i=b}}var a=e+f;var c=Math.min(g,d);if(a===0){this.remove(j)}else{crosscounts[j/2]=a;this.yranges[j++]=b;this.yranges[j++]=c}b=i=c;if(i<d){this.insert(j,i,d,e)}}if(b<g){this.insert(j,b,g,f)}};function AreaOp(){}AreaOp.CTAG_LEFT=0;AreaOp.CTAG_RIGHT=1;AreaOp.ETAG_IGNORE=0;AreaOp.ETAG_ENTER=1;AreaOp.ETAG_EXIT=-1;AreaOp.RSTAG_INSIDE=1;AreaOp.RSTAG_OUTSIDE=-1;AreaOp.EmptyLinkList=[null,null];AreaOp.EmptyChainList=[null,null];AreaOp.prototype.calculate=function(c,b){var a=[];AreaOp.addEdges(a,c,AreaOp.CTAG_LEFT);AreaOp.addEdges(a,b,AreaOp.CTAG_RIGHT);a=this.pruneEdges(a);return a};AreaOp.addEdges=function(a,e,d){for(var b=0;b<e.length;b++){var f=e[b];if(f.getOrder()>0){a.push(new Edge(f,d))}}};AreaOp.YXTopComparator=function(d,c){var b=d.getCurve();var a=c.getCurve();var f,e;if((f=b.getYTop())===(e=a.getYTop())){if((f=b.getXTop())===(e=a.getXTop())){return 0}}if(f<e){return -1}return 1};AreaOp.prototype.pruneEdges=function(f){var A=f.length;if(A<2){return f}var u=f.slice(0);u.sort(AreaOp.YXTopComparator);var B;var k=0;var D=0;var g=0;var s=0;var o=[0,0];var m=[];var v=[];var c=[];while(k<A){var n=o[0];for(g=s=D-1;g>=k;g--){B=u[g];if(B.getCurve().getYBot()>n){if(s>g){u[s]=B}s--}}k=s+1;if(k>=D){if(D>=A){break}n=u[D].getCurve().getYTop();if(n>o[0]){AreaOp.finalizeSubCurves(m,v)}o[0]=n}while(D<A){B=u[D];if(B.getCurve().getYTop()>n){break}D++}o[1]=u[k].getCurve().getYBot();if(D<A){n=u[D].getCurve().getYTop();if(o[1]>n){o[1]=n}}var z=1;for(g=k;g<D;g++){B=u[g];B.setEquivalence(0);for(s=g;s>k;s--){var H=u[s-1];var E=B.compareTo(H,o);if(o[1]<=o[0]){throw new InternalError("backstepping to "+o[1]+" from "+o[0])}if(E>=0){if(E===0){var G=H.getEquivalence();if(G===0){G=z++;H.setEquivalence(G)}B.setEquivalence(G)}break}u[s]=H}u[s]=B}this.newRow();var d=o[0];var j=o[1];for(g=k;g<D;g++){B=u[g];var b;var G=B.getEquivalence();if(G!==0){var C=this.getState();b=(C===AreaOp.RSTAG_INSIDE?AreaOp.ETAG_EXIT:AreaOp.ETAG_ENTER);var p=null;var a=B;var r=j;do{this.classify(B);if(p===null&&B.isActiveFor(d,b)){p=B}n=B.getCurve().getYBot();if(n>r){a=B;r=n}}while(++g<D&&(B=u[g]).getEquivalence()===G);--g;if(this.getState()===C){b=AreaOp.ETAG_IGNORE}else{B=(p!==null?p:a)}}else{b=this.classify(B)}if(b!==AreaOp.ETAG_IGNORE){B.record(j,b);c.push(new CurveLink(B.getCurve(),d,j,b))}}if(this.getState()!==AreaOp.RSTAG_OUTSIDE){for(g=k;g<D;g++){B=u[g]}}AreaOp.resolveLinks(m,v,c);c.length=0;o[0]=j}AreaOp.finalizeSubCurves(m,v);var F=[];for(var t=0;t<m.length;t++){var l=m[t];F.push(l.getMoveto());var q=l;while((q=q.getNext())!==null){if(!l.absorb(q)){F.push(l.getSubCurve());l=q}}F.push(l.getSubCurve())}return F};AreaOp.finalizeSubCurves=function(j,e){var g=e.length;if(g===0){return}if((g&1)!==0){throw new InternalError("Odd number of chains!")}var d=e.slice(0);for(var c=1;c<g;c+=2){var b=d[c-1];var f=d[c];var a=b.linkTo(f);if(a!==null){j.push(a)}}e.length=0};AreaOp.resolveLinks=function(j,s,b){var t=b.length;var a;if(t===0){a=AreaOp.EmptyLinkList}else{if((t&1)!==0){throw new InternalError("Odd number of new curves!")}a=b.slice(0);a.push(null,null)}var c=s.length;var n;if(c===0){n=AreaOp.EmptyChainList}else{if((c&1)!==0){throw new InternalError("Odd number of chains!")}n=s.slice(0);n.push(null,null)}var m=0;var e=0;s.length=0;var q=n[0];var l=n[1];var i=a[0];var p=a[1];while(q!==null||i!==null){var o=(i===null);var r=(q===null);if(!o&&!r){o=((m&1)===0&&q.getX()===l.getX());r=((e&1)===0&&i.getX()===p.getX());if(!o&&!r){var d=q.getX();var f=i.getX();o=(l!==null&&d<f&&AreaOp.obstructs(l.getX(),f,m));r=(p!==null&&f<d&&AreaOp.obstructs(p.getX(),d,e))}}if(o){var u=q.linkTo(l);if(u!==null){j.push(u)}m+=2;q=n[m];l=n[m+1]}if(r){var k=new ChainEnd(i,null);var g=new ChainEnd(p,k);k.setOtherEnd(g);s.push(k);s.push(g);e+=2;i=a[e];p=a[e+1]}if(!o&&!r){q.addLink(i);s.push(q);m++;q=l;l=n[m+1];e++;i=p;p=a[e+1]}}};AreaOp.obstructs=function(c,b,a){return(((a&1)===0)?(c<=b):(c<b))};function AreaOpCAGOp(){this.inLeft=false;this.inRight=false;this.inResult=false}AreaOpCAGOp.prototype=Object.create(AreaOp.prototype);AreaOpCAGOp.prototype.constructor=AreaOpCAGOp;AreaOpCAGOp.prototype.newRow=function(){this.inLeft=false;this.inRight=false;this.inResult=false};AreaOpCAGOp.prototype.classify=function(b){if(b.getCurveTag()===AreaOp.CTAG_LEFT){this.inLeft=!this.inLeft}else{this.inRight=!this.inRight}var a=this.newClassification(this.inLeft,this.inRight);if(this.inResult===a){return AreaOp.ETAG_IGNORE}this.inResult=a;return(a?AreaOp.ETAG_ENTER:AreaOp.ETAG_EXIT)};AreaOpCAGOp.prototype.getState=function(){return(this.inResult?AreaOp.RSTAG_INSIDE:AreaOp.RSTAG_OUTSIDE)};function AreaOpAddOp(){AreaOpCAGOp.call(this)}AreaOpAddOp.prototype=Object.create(AreaOpCAGOp.prototype);AreaOpAddOp.prototype.constructor=AreaOpAddOp;AreaOpAddOp.prototype.newClassification=function(b,a){return(b||a)};function AreaOpSubOp(){AreaOpCAGOp.call(this)}AreaOpSubOp.prototype=Object.create(AreaOpCAGOp.prototype);AreaOpSubOp.prototype.constructor=AreaOpSubOp;AreaOpSubOp.prototype.newClassification=function(b,a){return(b&&!a)};function AreaOpIntOp(){AreaOpCAGOp.call(this)}AreaOpIntOp.prototype=Object.create(AreaOpCAGOp.prototype);AreaOpIntOp.prototype.constructor=AreaOpIntOp;AreaOpIntOp.prototype.newClassification=function(b,a){return(b&&a)};function AreaOpXorOp(){AreaOpCAGOp.call(this)}AreaOpXorOp.prototype=Object.create(AreaOpCAGOp.prototype);AreaOpXorOp.prototype.constructor=AreaOpXorOp;AreaOpXorOp.prototype.newClassification=function(b,a){return(b!==a)};function AreaOpNZWindOp(){this.count=0}AreaOpNZWindOp.prototype=Object.create(AreaOp.prototype);AreaOpNZWindOp.prototype.constructor=AreaOpNZWindOp;AreaOpNZWindOp.prototype.newRow=function(){this.count=0};AreaOpNZWindOp.prototype.classify=function(c){var b=this.count;var a=(b===0?AreaOp.ETAG_ENTER:AreaOp.ETAG_IGNORE);b+=c.getCurve().getDirection();this.count=b;return(b===0?AreaOp.ETAG_EXIT:a)};AreaOpNZWindOp.prototype.getState=function(){return((this.count===0)?AreaOp.RSTAG_OUTSIDE:AreaOp.RSTAG_INSIDE)};function AreaOpEOWindOp(){this.inside=false}AreaOpEOWindOp.prototype=Object.create(AreaOp.prototype);AreaOpEOWindOp.prototype.constructor=AreaOpEOWindOp;AreaOpEOWindOp.prototype.newRow=function(){inside=false};AreaOpEOWindOp.prototype.classify=function(b){var a=!this.inside;this.inside=a;return(a?AreaOp.ETAG_ENTER:AreaOp.ETAG_EXIT)};AreaOpEOWindOp.prototype.getState=function(){return(inside?AreaOp.RSTAG_INSIDE:AreaOp.RSTAG_OUTSIDE)};function ChainEnd(b,a){this.head=b;this.tail=b;this.partner=a;this.etag=b.getEdgeTag()}ChainEnd.prototype.getChain=function(){return this.head};ChainEnd.prototype.setOtherEnd=function(a){this.partner=a};ChainEnd.prototype.getPartner=function(){return this.partner};ChainEnd.prototype.linkTo=function(d){if(this.etag===AreaOp.ETAG_IGNORE||d.etag===AreaOp.ETAG_IGNORE){throw new InternalError("ChainEnd linked more than once!")}if(this.etag===d.etag){throw new InternalError("Linking chains of the same type!")}var e,b;if(this.etag===AreaOp.ETAG_ENTER){e=this;b=d}else{e=d;b=this}this.etag=AreaOp.ETAG_IGNORE;d.etag=AreaOp.ETAG_IGNORE;e.tail.setNext(b.head);e.tail=b.tail;if(this.partner===d){return e.head}var a=b.partner;var c=e.partner;a.partner=c;c.partner=a;if(e.head.getYTop()<a.head.getYTop()){e.tail.setNext(a.head);a.head=e.head}else{c.tail.setNext(e.head);c.tail=e.tail}return null};ChainEnd.prototype.addLink=function(a){if(this.etag===AreaOp.ETAG_ENTER){this.tail.setNext(a);this.tail=a}else{a.setNext(this.head);this.head=a}};ChainEnd.prototype.getX=function(){if(this.etag===AreaOp.ETAG_ENTER){return this.tail.getXBot()}else{return this.head.getXBot()}};function CurveLink(d,b,a,c){this.curve=d;this.ytop=b;this.ybot=a;this.etag=c;this.next=null;if(this.ytop<d.getYTop()||this.ybot>d.getYBot()){throw new InternalError("bad curvelink ["+ytop+"=>"+ybot+"] for "+d)}}CurveLink.prototype.absorb=function(a){return this.absorb(a.curve,a.ytop,a.ybot,a.etag)};CurveLink.prototype.absorb=function(d,b,a,c){if(this.curve!==d||this.etag!==c||this.ybot<b||this.ytop>a){return false}if(b<d.getYTop()||a>d.getYBot()){throw new InternalError("bad curvelink ["+b+"=>"+a+"] for "+d)}this.ytop=Math.min(this.ytop,b);this.ybot=Math.max(this.ybot,a);return true};CurveLink.prototype.isEmpty=function(){return(this.ytop===this.ybot)};CurveLink.prototype.getCurve=function(){return this.curve};CurveLink.prototype.getSubCurve=function(){if(this.ytop===this.curve.getYTop()&&this.ybot===this.curve.getYBot()){return this.curve.getWithDirection(this.etag)}return this.curve.getSubCurve(this.ytop,this.ybot,this.etag)};CurveLink.prototype.getMoveto=function(){return new Order0(this.getXTop(),this.getYTop())};CurveLink.prototype.getXTop=function(){return this.curve.XforY(this.ytop)};CurveLink.prototype.getYTop=function(){return this.ytop};CurveLink.prototype.getXBot=function(){return this.curve.XforY(this.ybot)};CurveLink.prototype.getYBot=function(){return this.ybot};CurveLink.prototype.getX=function(){return this.curve.XforY(this.ytop)};CurveLink.prototype.getEdgeTag=function(){return this.etag};CurveLink.prototype.setNext=function(a){this.next=a};CurveLink.prototype.getNext=function(){return this.next};function Edge(d,a,b){if(b===undefined){b=AreaOp.ETAG_IGNORE}this.curve=d;this.ctag=a;this.etag=b;this.activey=0;this.equivalence=0;this.lastEdge=null;this.lastResult=0;this.lastLimit=0}Edge.prototype.getCurve=function(){return this.curve};Edge.prototype.getCurveTag=function(){return this.ctag};Edge.prototype.getEdgeTag=function(){return this.etag};Edge.prototype.setEdgeTag=function(a){this.etag=a};Edge.prototype.getEquivalence=function(){return this.equivalence};Edge.prototype.setEquivalence=function(a){this.equivalence=a};Edge.prototype.compareTo=function(a,c){if(a===this.lastEdge&&c[0]<this.lastLimit){if(c[1]>this.lastLimit){c[1]=this.lastLimit}return this.lastResult}if(this===a.lastEdge&&c[0]<a.lastLimit){if(c[1]>a.lastLimit){c[1]=a.lastLimit}return 0-a.lastResult}var b=this.curve.compareTo(a.curve,c);this.lastEdge=a;this.lastLimit=c[1];this.lastResult=b;return b};Edge.prototype.record=function(a,b){this.activey=a;this.etag=b};Edge.prototype.isActiveFor=function(b,a){return(this.etag===a&&this.activey>=b)};